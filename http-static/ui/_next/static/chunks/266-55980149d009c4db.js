"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{9056:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(6521),s=n(9400),o=n(4612);function a(e){let{inProgress:t,...n}={...e};return(0,r.jsx)(s.z,{...n,disabled:t,children:t?(0,r.jsx)(o.a,{}):n.children})}},3301:function(e,t,n){n.d(t,{s:function(){return c}});var r=n(6521),s=n(943),o=n(129),a=n(7280),i=n(5721);function c(e){let t=(0,a.useRouter)(),[n,c]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=()=>{c(!1)},n=()=>{c(!0)};return t.events.on("routeChangeStart",e),t.events.on("routeChangeComplete",n),t.events.on("routeChangeError",n),()=>{t.events.off("routeChangeStart",e),t.events.off("routeChangeComplete",n),t.events.off("routeChangeError",n)}},[t]),(0,i.useEffect)(()=>{e.dataLoaded&&n||e.dataErrored?!n||e.dataLoaded||e.dataErrored?(0,s.We)():(0,s.fD)(50):(0,s.QT)()},[e.dataLoaded,e.dataErrored,n]),(0,r.jsx)(o.V,{autoReset:!0})}},5384:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(6521),s=n(139),o=n(2766),a=n(5988),i=n(4612),c=n(5721),l=n(9445),d=n(8342);function u(e){let{closeModal:t,form:n,useSettings:s,save:u}=e,{data:x,mutate:p}=s(),[m,h]=(0,c.useState)(!1);return x?c.createElement(n,{initialValues:x,onSubmit:async e=>{h(!0),(0,o.c0)({id:"settings-save",disallowClose:!0,autoClose:!1,loading:!0,icon:null,color:"orange",title:"Saving settings...",message:"Please wait while the new settings are applied..."});try{await u(e)}catch(e){return(0,o.wD)({id:"settings-save",loading:!1,disallowClose:!1,color:"red",icon:(0,r.jsx)(l.Z,{}),title:"Error saving settings",message:"There was an error saving settings. Please check form data and try again."}),console.error(e),h(!1),!1}return p(e),h(!1),(0,o.wD)({id:"settings-save",loading:!1,disallowClose:!1,autoClose:5e3,color:"green",icon:(0,r.jsx)(d.Z,{}),title:"Settings saved",message:"Settings were saved and applied successfully."}),t(),!0},saving:m}):(0,r.jsx)(a.M,{py:"md",children:(0,r.jsx)(i.a,{})})}function x(e){return(0,r.jsx)(s.u,{opened:e.opened,size:e.size,onClose:()=>e.setOpened(!1),title:e.title,children:(0,r.jsx)(u,{closeModal:()=>{e.onSettingsUpdate&&e.onSettingsUpdate(),e.setOpened(!1)},useSettings:e.useSettings,save:e.save,form:e.form})})}},9266:function(e,t,n){n.d(t,{Z:function(){return eV}});var r=n(6521),s=n(3685),o=n(864),a=n(1352),i=n(2715),c=n(4612),l=n(9609),d=n.n(l),u=n(4421),x=n(3301),p=n(3497),m=n(4931),h=n(9626),f=n(7744),g=n(991),v=n(5654),b=n.n(v);let j=(0,p.k)(e=>({footer:{marginTop:120,paddingTop:2*e.spacing.xl,paddingBottom:2*e.spacing.xl+40,backgroundColor:"dark"===e.colorScheme?e.colors.dark[6]:e.colors.gray[0],borderTop:"1px solid ".concat("dark"===e.colorScheme?e.colors.dark[5]:e.colors.gray[2]),a:{color:e.colors.blue[6]}},logo:{opacity:.5},statusInfo:{color:e.colors.gray[6],fontSize:e.fontSizes.xs,b:{color:e.colors.gray[7],fontWeight:"normal"}},success:{color:e.colors.green[6]},failure:{color:e.colors.red[6]},disabled:{color:e.colors.gray[6]},afterFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:e.spacing.xl,paddingTop:e.spacing.xl,paddingBottom:e.spacing.xl,borderTop:"1px solid ".concat("dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[2]),[e.fn.smallerThan("sm")]:{flexDirection:"column"}},support:{[e.fn.smallerThan("sm")]:{marginTop:e.spacing.xs}},sep:{margin:"0 6px",display:"inline-block"}}));function y(e){let{classes:t}=j();return(0,r.jsxs)("footer",{className:t.footer,children:[(0,r.jsx)(a.W,{size:"lg",children:(0,r.jsx)(b(),{src:"/media/overvis-basic-logo.svg",width:"60",height:"40",alt:"Overvis Logo",className:t.logo})}),(0,r.jsx)(a.W,{size:"lg",className:t.statusInfo,children:(0,r.jsx)(m.k,{gap:"md",justify:"flex-start",align:"flex-start",direction:"row",wrap:"wrap",columnGap:40,children:(0,r.jsxs)(h.K,{spacing:2,children:[(0,r.jsxs)(s.x,{children:["OPCB is developed by ",(0,r.jsx)("a",{href:"https://www.overvis.com/",children:"Overvis"})," and"," ",(0,r.jsx)("a",{href:"https://www.novatek-electro.com/",children:"Novatek-Electro"})," \xa9 2023"]}),(0,r.jsxs)(s.x,{children:[(0,r.jsx)("a",{href:"https://docs.overvis.com/#/OPCB/",children:"Documentation"}),(0,r.jsx)("span",{className:t.sep,children:"∙"}),(0,r.jsx)("a",{href:"mailto:support@overvis.com",children:"support@overvis.com"}),(0,r.jsx)("span",{className:t.sep,children:"∙"}),"+44 800 048 50 08"]}),(0,r.jsxs)(i.Z,{children:[(0,r.jsxs)(s.x,{children:[(0,r.jsx)("b",{children:"Firmware version:"})," ",e.firmwareVersion," (",e.firmwareDate,")"]}),"string"!=typeof e.updateState&&"scheduled"===e.updateState.kind&&(0,r.jsx)(f.e,{href:"/control",children:(0,r.jsxs)(g.C,{color:"orange",children:["Scheduled update: ",e.updateState.version]})}),"string"!=typeof e.updateState&&"available"===e.updateState.kind&&(0,r.jsx)(f.e,{href:"/control",children:(0,r.jsxs)(g.C,{color:"orange",children:["Available update: ",e.updateState.version]})})]})]})})})]})}var k=n(6360),S=n(2203),w=n(3213),N=n(9618),B=n(5039),T=n(3381),C=n(7390),M=n(5992),P=n(8122),O=n(6688),Z=n(7446),z=n(8938),L=n(5737),E=n(9604),D=n(4984),I=n(8711),A=n(7820),F=n(9764),V=n(9224),W=n(9646),R=n.n(W),U=n(7280),K=n(5721),H=n(5988),Q=n(9906),Y=n(9400),$=n(9111),_=n(6215),G=n(9494),J=n(206),q=n(7591),X=n(7521),ee=n(9503),et=n(7663),en=n(3260),er=n(3071),es=n(5384),eo=n(1643),ea=n(6765),ei=n(9056),ec=n(8500),el=n(6928);function ed(e){let{initialValues:t,onSubmit:n,saving:s}=e,o=(0,ea.c)({initialValues:t});return(0,r.jsx)("form",{onSubmit:o.onSubmit(n),children:(0,r.jsxs)(h.K,{children:[(0,r.jsx)(_.Ph,{label:"Timezone:",data:o.values.timezonesList,...o.getInputProps("timezone"),searchable:!0}),(0,r.jsx)(G.X,{label:"Synchronize time with NTP server",checked:o.values.useNtp,...o.getInputProps("useNtp")}),!o.values.useNtp&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ec.M,{label:"Set current date:",...o.getInputProps("setTime")}),(0,r.jsx)(el.M,{label:"Set current time:",withSeconds:!0,...o.getInputProps("setTime")})]}),(0,r.jsx)(ei.Z,{type:"submit",inProgress:s,children:"Save"})]})})}let eu=(0,p.k)(e=>({card:{padding:e.spacing.xs,textAlign:"center"}}));function ex(e){let{time:t,cpus:n,storage:o,ram:a,temperatureCelsius:c,voltage:l}=e,{classes:d}=eu(),[u,x]=K.useState(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(es.Z,{title:"Time settings",form:ed,useSettings:eo.r,save:eo.z,opened:u,setOpened:x}),(0,r.jsx)(J.Z,{h:"100%",children:(0,r.jsxs)(J.Z.Section,{children:[(0,r.jsxs)(h.K,{spacing:"xs",pb:"sm",sx:e=>({borderBottom:"1px solid ".concat(e.colors.gray[3])}),children:[(0,r.jsxs)(i.Z,{align:"center",position:"center",noWrap:!0,spacing:4,sx:e=>({borderBottom:"1px solid ".concat(e.colors.gray[3])}),pb:"xs",children:[(0,r.jsx)(s.x,{size:"sm",align:"center",children:(0,en.o0)(1e3*t.now)}),(0,r.jsx)(q.A,{color:"blue",size:"xs",onClick:()=>x(!0),children:(0,r.jsx)(et.Z,{})})]}),(0,r.jsxs)(i.Z,{align:"start",position:"apart",noWrap:!0,children:[(0,r.jsx)(s.x,{size:"sm",c:"grey",children:"Uptime"}),(0,r.jsx)(s.x,{size:"sm",children:(0,er.Ch)(t.os)})]}),(0,r.jsxs)(i.Z,{align:"start",position:"apart",noWrap:!0,children:[(0,r.jsx)(s.x,{size:"sm",c:"grey",children:"Runtime"}),(0,r.jsx)(s.x,{size:"sm",children:(0,er.Ch)(t.process)})]})]}),n.length>0&&(0,r.jsxs)(M.x,{className:d.card,sx:e=>({borderBottom:"1px solid ".concat(e.colors.gray[3])}),children:[(0,r.jsx)(s.x,{children:(0,r.jsx)("b",{children:"CPU"})}),(0,r.jsx)(i.Z,{position:"center",pt:"sm",spacing:"xs",children:n.map((e,t)=>(0,r.jsxs)(g.C,{color:e>.8?"red":e>.5?"orange":"green",maw:"60px",children:[Math.round(100*e),"%"]},t))})]}),(0,r.jsxs)(X.M,{cols:2,spacing:0,children:[(0,r.jsxs)(M.x,{sx:e=>({borderBottom:"1px solid ".concat(e.colors.gray[3]),borderRight:"1px solid ".concat(e.colors.gray[3])}),className:d.card,children:[(0,r.jsx)("b",{children:"SD"}),o?(0,r.jsx)(ep,{usedBytes:o.usedBytes,totalBytes:o.totalBytes}):(0,r.jsx)(s.x,{children:"-"})]}),(0,r.jsxs)(M.x,{className:d.card,sx:e=>({borderBottom:"1px solid ".concat(e.colors.gray[3])}),children:[(0,r.jsx)("b",{children:"RAM"}),(0,r.jsx)(ep,{usedBytes:a.usedBytes,totalBytes:a.totalBytes})]})]}),(0,r.jsxs)(X.M,{cols:2,spacing:0,children:[(0,r.jsxs)(M.x,{className:d.card,sx:e=>({borderRight:"1px solid ".concat(e.colors.gray[3])}),children:[l?l.toFixed(1):"-"," ",(0,r.jsx)("b",{children:"V"})]}),(0,r.jsx)(M.x,{className:d.card,children:(0,r.jsxs)(s.x,{c:c?c>80?"red":c>50?"orange":"black":"dimmed",children:[c?c.toFixed(1):"-"," ",(0,r.jsx)("b",{children:"\xb0C"})]})})]})]})})]})}function ep(e){let{usedBytes:t,totalBytes:n}=e,o=Math.round(t/1048576),a=Math.round(n/1048576),i=o/a;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.x,{size:10,color:"dimmed",children:[o,"/",a," Mb"]}),(0,r.jsx)(ee.E,{size:"xs",value:100*o/a,color:i>.8?"red":i>.5?"orange":"green"})]})}var em=n(9648),eh=n(1569),ef=n(3442),eg=n(1748),ev=n(8394),eb=n(1508),ej=n(9328),ey=n(8846),ek=n(4695),eS=n(4404);function ew(e){let{internet:t,lan:n,mbtcpClients:s,mbtcpServer:o,mobile:a,rc:c,rs485:l,vpn:d,wifi:u}=e,x=(0,k.rZ)(),p={border:x.colors.blue[6],disabled:x.colors.gray[6],error:x.colors.red[6],ok:x.colors.green[6],black:x.colors.gray[8],warn:x.colors.orange[6]},m=("unregistered"===d.connection.status||"disabled"===d.connection.status)&&"disabled"===c.status?"disabled":"offline"===d.connection.status&&"online"!==c.status&&"unbound"!==c.status||"offline"===c.status&&"online"!==d.connection.status?"error":"online",h=Object.values(l).length;return(0,r.jsxs)(i.Z,{position:"center",children:[(0,r.jsx)(w.z,{smallerThan:"xs",styles:{display:"none"},children:(0,r.jsxs)("svg",{width:"100%",height:"100%",viewBox:"".concat("disabled"===t.status?300:0," 68 ").concat(900+100*h+40," 382"),style:{maxHeight:"280px"},children:[(0,r.jsx)("defs",{children:(0,r.jsx)("marker",{id:"head",orient:"auto",markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",children:(0,r.jsx)("path",{d:"M0,0 V4 L4,2 Z",fill:p.ok})})}),"disabled"!==t.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("image",{href:"/media/overvis-basic-logo.svg",width:65,x:5,y:300}),"online"===d.connection.status?(0,r.jsx)(em.Z,{size:80,stroke:1,x:"0",y:"225",color:p.ok}):(0,r.jsx)(eh.Z,{size:80,stroke:1,x:"0",y:"225",color:"disabled"===m||"error"===m?p.disabled:p.border}),"disabled"!==m&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("path",{strokeWidth:4,fill:"none",strokeDasharray:"online"===m?"0":"4,8",stroke:"error"===m?p.error:p.ok,strokeLinejoin:"round",d:"M90,265 H192",markerEnd:"online"===m?"url(#head)":""})}),"online"===t.status&&t.ip&&(0,r.jsx)("text",{x:240,y:220,fill:p.ok,style:{textAnchor:"middle"},children:t.ip})]}),(0,r.jsx)(ef.Z,{size:80,stroke:1,x:"200",y:"225",color:"online"===t.status?p.border:p.disabled}),("online"===t.status||"offline"===t.status&&("connected"===n.status||"connected"===u.status))&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("path",{strokeWidth:4,fill:"none",stroke:"online"===t.status?t.ping&&t.ping<100?p.ok:p.warn:p.error,strokeDasharray:"online"===t.status?"0":"4,8",strokeLinejoin:"round",d:"M290,265 H491"})}),(0,r.jsx)(eB,{server:o,colors:p,x:390.5,y:100}),(0,r.jsx)(eT,{clients:s,colors:p,x:390.5,y:425}),(0,r.jsx)(eg.Z,{size:80,stroke:1,x:"500",y:"215",color:"connected"===n.status||"connected"===u.status?p.border:p.disabled}),("connected"===u.status||"disconnected"===u.status)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("text",{x:540,y:80,fill:"connected"===u.status?p.ok:p.error,children:["SSID: ",(0,r.jsx)("tspan",{style:{fontWeight:"bold"},children:u.ssid})]}),(0,r.jsx)("path",{strokeWidth:4,fill:"none",stroke:"connected"===u.status?p.ok:p.error,strokeDasharray:"connected"===u.status?"0":"4,8",strokeLinejoin:"round",d:"M717,105 V90 H540 V210"})]}),("connected"===n.status||"disconnected"===n.status)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{strokeWidth:4,fill:"none",stroke:"connected"===n.status?p.ok:p.error,strokeDasharray:"connected"===n.status?"0":"4,8",strokeLinejoin:"round",d:"M717,412 V427 H540 V300"}),"connected"===n.status&&(0,r.jsx)("text",{x:540,y:450,fill:p.ok,children:n.ip})]}),(0,r.jsx)(eN,{colors:p,x:668,y:125,wifi:u,lanStatus:n.status,rs485PortsNum:h}),h>0&&(0,r.jsx)("path",{strokeWidth:2,fill:"none",stroke:h>0?p.border:p.disabled,strokeLinejoin:"round",d:"M847,412 V427 H".concat(900+100*Math.max(h,1)+40)}),(0,r.jsx)(eC,{colors:p,rs485:l,spacing:100,shift:40})]})}),(0,r.jsx)(w.z,{largerThan:"xs",styles:{display:"none"},children:(0,r.jsx)(i.Z,{position:"center",children:(0,r.jsx)(M.x,{maw:200,children:(0,r.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 235 290",children:(0,r.jsx)(eN,{colors:p,x:2,y:10,wifi:u,lanStatus:n.status,rs485PortsNum:h})})})})})]})}function eN(e){let{colors:t,x:n,y:s,wifi:o,lanStatus:a,rs485PortsNum:i}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("image",{href:"/media/opcb-top.png",x:n-10,y:s+5,width:"250",height:"250"}),(0,r.jsx)("rect",{x:n,y:s,width:"230",height:"265",rx:"20",stroke:t.border,strokeWidth:2,fill:"transparent"}),(0,r.jsx)("rect",{x:n+35,y:s-20,width:"30",height:"30",fill:"white",rx:"5px"}),(0,r.jsx)(ev.Z,{stroke:2,x:n+35+3,y:s-12,color:"disabled"===o.status?t.disabled:"disconnected"===o.status?t.error:t.ok}),"ap"===o.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("text",{x:n+35+5,y:s-40,fill:t.ok,children:["Access Point: ",(0,r.jsx)("tspan",{style:{fontWeight:"bold"},children:o.ssid})]}),(0,r.jsx)("text",{x:n+35+5,y:s-20,fill:t.ok,children:o.url})]}),(0,r.jsx)("rect",{x:n+35,y:s+250,width:"30",height:"30",fill:"white",rx:"5px"}),(0,r.jsx)(eb.Z,{stroke:2,x:n+35+3,y:s+250+3,color:"disabled"===a?t.disabled:"disconnected"===a?t.error:t.ok}),(0,r.jsx)("rect",{x:n+165,y:s+250,width:"30",height:"30",fill:"white",rx:"5px"}),(0,r.jsx)(ej.Z,{stroke:2,x:n+165+3,y:s+250+3,color:i>0?t.border:t.disabled})]})}function eB(e){let{x:t,y:n,server:s,colors:o}=e;if("disabled"===s.status)return(0,r.jsx)(r.Fragment,{});let a=s.clients.filter(e=>"master"===e.mode.status).length,i=s.clients.filter(e=>"slave"===e.mode.status).length,c=a>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ey.Z,{size:20,stroke:2,x:t-130,y:n+18,color:o.border}),(0,r.jsxs)("text",{x:t-137,y:n+18+15,fill:o.border,textAnchor:"end",children:[a," \xd7"]}),(0,r.jsx)("path",{strokeWidth:4,fill:"none",stroke:o.ok,strokeLinejoin:"round",d:"M".concat(t-98,",").concat(n+18+11," H").concat(t-40),markerEnd:"url(#head)"})]}):(0,r.jsx)(r.Fragment,{}),l=i>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ek.Z,{size:20,stroke:2,x:t-130,y:n+43,color:o.border}),(0,r.jsxs)("text",{x:t-137,y:n+43+15,fill:o.border,textAnchor:"end",children:[i," \xd7"]}),(0,r.jsx)("path",{strokeWidth:4,fill:"none",stroke:o.ok,strokeLinejoin:"round",d:"M".concat(t-37,",").concat(n+43+11," H").concat(t-95),markerEnd:"url(#head)"})]}):(0,r.jsx)(r.Fragment,{});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("text",{x:t,y:n-20,fill:o.ok,style:{textAnchor:"middle"},children:"Serving Modbus TCP"}),(0,r.jsxs)("text",{x:t,y:n,fill:o.ok,style:{textAnchor:"middle"},fontWeight:"bold",children:[s.listenIp,":",s.listenPort]}),(0,r.jsx)(eS.Z,{size:60,stroke:1.25,x:t-30,y:n,color:o.border})," ",(0,r.jsx)("path",{strokeWidth:2,fill:"none",stroke:o.ok,strokeLinejoin:"round",d:"M".concat(t,",253 V").concat(n+60)}),c,l]})}function eT(e){let{x:t,y:n,clients:s,colors:o}=e;if(Object.values(s).length<1)return(0,r.jsx)(r.Fragment,{});let a=t-10,i=Object.values(s).map((e,s)=>{let i="connected"===e.info.status?o.ok:"disconnected"===e.info.status?o.error:o.disabled;return s<4?(0,r.jsxs)("g",{children:[(0,r.jsx)("text",{fontWeight:"bold",x:a-130,y:n-25*s,fill:i,style:{textAnchor:"end"},children:e.address}),"master"===e.mode.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ey.Z,{size:20,stroke:2,x:a-120,y:n-25*s-16,color:i}),"disabled"!==e.info.status&&(0,r.jsx)("path",{strokeWidth:4,fill:"none",stroke:i,strokeLinejoin:"round",d:"M".concat(a-85,",").concat(n-25*s-6," H").concat(t-20+("connected"===e.info.status?0:5)),markerEnd:"connected"===e.info.status?"url(#head)":"",strokeDasharray:"connected"===e.info.status?"0":"4,8"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ek.Z,{size:20,stroke:2,x:a-120,y:n-25*s-17,color:i}),"disabled"!==e.info.status&&(0,r.jsx)("path",{strokeWidth:4,fill:"none",stroke:i,strokeLinejoin:"round",d:"M".concat(t-15,",").concat(n-25*s-6," H").concat(a-80-("connected"===e.info.status?0:5)),markerEnd:"connected"===e.info.status?"url(#head)":"",strokeDasharray:"connected"===e.info.status?"0":"4,8"})]})]},"".concat(e.address)):(0,r.jsx)(r.Fragment,{})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{strokeWidth:2,fill:"none",stroke:o.ok,strokeLinejoin:"round",d:"M".concat(t,",277 V").concat(n)}),i]})}function eC(e){let{rs485:t,colors:n,spacing:s,shift:o}=e,a=900+o;return(0,r.jsx)(r.Fragment,{children:Object.entries(t).map((e,t)=>{let[o,i]=e,c="connected"===i.info.status?n.border:"disabled"===i.info.status?n.disabled:n.error;return(0,r.jsxs)("g",{children:[(0,r.jsx)("text",{x:a+s*t+s/2,y:230,textAnchor:"middle",fill:c,fontWeight:"bold",children:i.device}),"master"===i.mode.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ey.Z,{size:60,stroke:1.25,x:a+t*s+s/2-30,y:230,color:c}),"disabled"!==i.info.status&&(0,r.jsx)("path",{strokeWidth:4,fill:"none",stroke:"connected"===i.info.status?n.ok:n.error,strokeLinejoin:"round",d:"M".concat(a+t*s+s/2,",").concat(300," V").concat("connected"===i.info.status?405:410),markerEnd:"connected"===i.info.status?"url(#head)":"",strokeDasharray:"connected"===i.info.status?"0":"4,8"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ek.Z,{size:60,stroke:1.25,x:a+t*s+s/2-30,y:230,color:c}),"disabled"!==i.info.status&&(0,r.jsx)("path",{strokeWidth:4,fill:"none",stroke:"connected"===i.info.status?n.ok:n.error,strokeLinejoin:"round",d:"M".concat(a+t*s+s/2,",415 V").concat(295),markerEnd:"connected"===i.info.status?"url(#head)":"",strokeDasharray:"connected"===i.info.status?"0":"4,8"})]})]},"".concat(o))})})}var eM=n(1947);function eP(){let e=(0,$.ZB)();if(!e.data)return e.error?(0,r.jsx)(r.Fragment,{children:"Error"}):(0,r.jsx)(H.M,{my:"lg",children:(0,r.jsx)(c.a,{})});let t=e.data;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Q.r,{my:4,gutter:"sm",children:[(0,r.jsx)(Q.r.Col,{md:3,sm:4,children:(0,r.jsx)(i.Z,{position:"center",pb:"sm",children:(0,r.jsx)(Y.z,{component:R(),href:"/quick-setup",size:"xs",leftIcon:(0,r.jsx)(eM.Z,{size:13}),variant:"outline",uppercase:!0,children:"Quick setup"})})}),(0,r.jsx)(Q.r.Col,{sm:8,md:9}),(0,r.jsx)(Q.r.Col,{order:4,orderSm:1,sm:4,md:3,children:(0,r.jsx)(ex,{...t.general})}),(0,r.jsx)(Q.r.Col,{order:3,orderSm:2,sm:8,md:9,sx:{alignSelf:"center"},children:(0,r.jsx)(ew,{...t})}),(0,r.jsx)(Q.r.Col,{order:5,span:12,children:(0,r.jsx)(i.Z,{position:"center",children:(0,r.jsxs)(s.x,{align:"center",size:"xs",color:"dimmed",children:["Firmware: ",t.general.firmware.version," (",t.general.firmware.date,")"]})})})]})})}var eO=n(3159),eZ=n(9458),ez=n(5333),eL=n(4893);async function eE(e){let t=(0,eL.bH)();await (0,eL.ri)(t,"/api/confs/set/",{method:"POST",body:JSON.stringify({"global:userProvidedDeviceName":e||""})})}function eD(e){let t=(0,k.rZ)(),[n,o]=(0,K.useState)(!1),[a,l]=(0,K.useState)(e.deviceUserProvidedName),[d,x]=(0,K.useState)(!1),p=(0,u.A)();return(0,r.jsxs)(i.Z,{noWrap:!0,children:[(0,r.jsx)(R(),{href:"/",style:{textDecoration:"none"},children:(0,r.jsx)(b(),{src:"/media/overvis-basic-logo.svg",width:"100",height:"40",alt:"Overvis Logo"})}),n?d?(0,r.jsx)(c.a,{size:24}):(0,r.jsx)("form",{onSubmit:async e=>{e.preventDefault(),x(!0),await eE(a),p.mutate(),x(!1),o(!1)},children:(0,r.jsx)(eO.i,{active:!0,children:(0,r.jsx)(eZ.o,{value:a,onChange:e=>{let t=e.currentTarget.value;t.length>30&&(t=t.substring(0,30)),l(t)},onBlur:()=>{o(!1)},placeholder:e.deviceModelName})})}):(0,r.jsxs)(i.Z,{spacing:4,children:[(0,r.jsx)(R(),{href:"/",style:{textDecoration:"none"},children:(0,r.jsxs)(h.K,{align:"flex-start",justify:"flex-start",spacing:0,mt:e.deviceUserProvidedName?"19px":"0px",children:[(0,r.jsx)(s.x,{sx:e=>({fontSize:"20px",color:e.colors.dark[9],lineHeight:"16px",fontWeight:700,maxWidth:"400px",overflow:"hidden",textOverflow:"ellipsis"}),transform:"uppercase",children:e.deviceUserProvidedName?e.deviceUserProvidedName:e.deviceModelName}),e.deviceUserProvidedName&&(0,r.jsx)(s.x,{sx:e=>({fontSize:"12px",color:e.colors.dark[3]}),transform:"uppercase",children:e.deviceModelName})]})}),(0,r.jsx)(s.x,{color:t.colors.blue[3],sx:{position:"relative",top:"4px",cursor:"pointer","&:hover":{color:t.colors.blue[6]}},children:(0,r.jsx)(ez.Z,{size:14,onClick:e=>{o(!0),e.preventDefault(),e.stopPropagation()}})})]})]})}let eI=(0,p.k)(e=>({mainLink:{textTransform:"uppercase",fontSize:13,color:e.colors[e.primaryColor][6],padding:"7px ".concat(e.spacing.sm,"px"),fontWeight:700,borderBottom:"2px solid transparent",transition:"border-color 100ms ease, color 100ms ease","&:hover":{color:"dark"===e.colorScheme?e.white:e.black,textDecoration:"none"}},secondaryLink:{color:"dark"===e.colorScheme?e.colors.dark[2]:e.colors.gray[6],fontSize:"10px",textTransform:"uppercase",transition:"color 100ms ease",borderRadius:e.radius.sm,"&:hover":{color:"dark"===e.colorScheme?e.white:e.black,textDecoration:"none"}},mainLinkActive:{color:e.black,borderBottomColor:e.black,pointerEvents:"none"},secondaryLinkActive:{backgroundColor:e.colors.gray[6],color:e.white,pointerEvents:"none"}}));function eA(e,t){return"/"===t?"/"===e:e.startsWith(t)}function eF(e){let{manufacturerModeEnabled:t,deviceModelName:n,deviceUserProvidedName:s}=e,[o,{toggle:c}]=(0,P.q)(!1),{classes:l,cx:d}=eI(),u=(0,U.useRouter)(),x=(0,k.rZ)(),p=x.colors[x.primaryColor][6],g=[{link:"/",label:"Dashboard",icon:(0,r.jsx)(O.Z,{width:"18px"})},{link:"/automation",label:"Automation",icon:(0,r.jsx)(Z.Z,{width:"18px"})},{link:"/connections/modbus-rs485",label:"Connections",icon:(0,r.jsx)(z.Z,{width:"18px"}),checkPath:"/connections"},{link:"/internet",label:"LAN/Internet",icon:(0,r.jsx)(L.Z,{width:"18px"})}],v=u.pathname,b=g.map(e=>(0,r.jsx)(f.e,{href:e.link,className:d(l.mainLink,{[l.mainLinkActive]:eA(v,e.checkPath||e.link)}),component:R(),children:(0,r.jsxs)(i.Z,{spacing:5,children:[e.icon,e.label]})},e.link)),j=[{link:"/control",label:"Control",icon:(0,r.jsx)(E.Z,{width:"12px"})},{link:"/access",label:"Access",icon:(0,r.jsx)(D.Z,{width:"12px"})}];t&&j.push({link:"/manufacture/register",label:"Manufacturing",icon:(0,r.jsx)(I.Z,{width:"12px"}),checkPath:"/manufacture"}),j.push({link:"/logout",label:"Log Out",icon:(0,r.jsx)(A.Z,{width:"12px"})});let y=j.map(e=>(0,r.jsx)(f.e,{href:e.link,className:d(l.secondaryLink,{[l.secondaryLinkActive]:eA(v,e.checkPath||e.link)}),component:R(),px:"sm",children:(0,r.jsxs)(i.Z,{spacing:5,children:[e.icon,e.label]})},e.label)),[W,H]=(0,K.useState)(!1),[Q,Y]=(0,K.useState)(!1);return(0,r.jsxs)(S.h,{height:84,mb:"lg",withBorder:!1,pos:"relative",zIndex:101,children:[(0,r.jsxs)(a.W,{size:"lg",sx:e=>({borderBottom:"2px solid black"}),bg:"white",children:[(0,r.jsxs)(h.K,{spacing:"xs",children:[(0,r.jsxs)(m.k,{justify:"space-between",align:"center",mih:84,children:[(0,r.jsx)(eD,{deviceModelName:n,deviceUserProvidedName:s}),(0,r.jsx)(w.z,{smallerThan:"md",styles:{display:"none"},children:(0,r.jsxs)(h.K,{spacing:0,justify:"space-between",h:84,pt:"lg",children:[(0,r.jsx)(i.Z,{position:"right",spacing:0,mr:"-sm",children:y}),(0,r.jsx)(i.Z,{spacing:0,position:"right",mr:"-sm",children:b})]})}),(0,r.jsx)(w.z,{largerThan:"md",styles:{display:"none"},children:(0,r.jsx)(N.O,{opened:o,onClick:c,size:"sm"})})]}),(0,r.jsx)(w.z,{largerThan:"md",styles:{display:"none"},children:(0,r.jsxs)(B.U,{in:o,pb:"lg",children:[(0,r.jsx)(h.K,{spacing:"xs",children:g.map(e=>(0,r.jsx)(T.O,{label:e.label,icon:e.icon,active:eA(v,e.link),component:R(),href:e.link,sx:{textTransform:"uppercase",fontWeight:700}},e.link))}),(0,r.jsx)(h.K,{spacing:"xs",pt:"lg",children:j.map(e=>(0,r.jsx)(T.O,{label:e.label,icon:e.icon,active:eA(v,e.link),component:R(),href:e.link,sx:{textTransform:"uppercase",fontSize:"10px"}},e.link))})]})})]}),(0,r.jsx)(B.U,{transitionDuration:100,in:W,onTransitionEnd:()=>{Y(W)},children:W||Q?(0,r.jsx)(eP,{}):(0,r.jsx)(r.Fragment,{})})]}),(0,r.jsx)(a.W,{size:"lg",pl:"132px",children:(0,r.jsx)(C.k,{onClick:()=>H(e=>!e),px:"10px",bg:"white",pos:"relative",top:"-2px",c:p,sx:{"&:hover":{color:"black"},borderEndStartRadius:"4px",borderEndEndRadius:"4px",borderBottom:"2px solid black",borderLeft:"2px solid black",borderRight:"2px solid black"},children:(0,r.jsx)(M.x,{h:"23px",mt:"-3px",children:W?(0,r.jsx)(F.Z,{}):(0,r.jsx)(V.Z,{})})})})]})}function eV(e){let{children:t,pageTitle:n,contentIsLoading:l}=e,p=(0,u.A)(),m=!!p.data;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.s,{dataLoaded:m,dataErrored:!!p.error}),(0,r.jsx)(d(),{children:(0,r.jsx)("title",{children:"OPCB :: ".concat(n)})}),p.data?(0,r.jsx)(o.V,{padding:"md",fixed:!1,header:(0,r.jsx)(eF,{manufacturerModeEnabled:p.data.manufacturerModeEnabled,deviceModelName:p.data.modelName,deviceUserProvidedName:p.data.userProvidedName}),footer:(0,r.jsx)(y,{firmwareVersion:p.data.firmwareVersion,firmwareDate:p.data.firmwareDate,updateState:p.data.updateState}),children:(0,r.jsx)(a.W,{size:"lg",mih:400,py:"lg",children:m?l?(0,r.jsx)(i.Z,{position:"center",p:"xl",children:(0,r.jsx)(c.a,{variant:"dots"})}):t:(0,r.jsx)(r.Fragment,{})})}):(0,r.jsxs)(s.x,{display:"none",children:["Loading ",null!==p.data&&""]})]})}},3260:function(e,t,n){n.d(t,{TD:function(){return l},mr:function(){return c},o0:function(){return i}});var r=n(7094),s=n.n(r),o=n(7921),a=n.n(o);function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?s()(e).format("YYYY-MM-DD HH:mm"):s()(e).utc().format("YYYY-MM-DD HH:mm")}function c(e){return"".concat(e.getHours().toString().padStart(2,"0"),":")+"".concat(e.getMinutes().toString().padStart(2,"0"))}function l(e){return new Date("1970-01-01 ".concat(e))}s().extend(a())},1643:function(e,t,n){n.d(t,{r:function(){return a},z:function(){return i}});var r=n(4893),s=n(1904);async function o(e){var t;let[n,r]=e,o=await (0,s.wv)(r,["global:time:timezone","global:time:useNtp"]),a=await (0,s.vn)(r,"/api/state/?keys=".concat("time:timezones"));return{timezone:o["global:time:timezone"]||"Etc/UTC",useNtp:"true"===o["global:time:useNtp"],timezonesList:(null===(t=a["time:timezones"])||void 0===t?void 0:t.split("\n"))||[],setTime:new Date}}function a(){let e=(0,r.tQ)("time-settings",o);return{...e}}async function i(e){let t=(0,r.bH)(),n={"global:time:timezone":e.timezone,"global:time:useNtp":e.useNtp?"true":"false"};if(await (0,r.ri)(t,"/api/confs/set/",{method:"POST",body:JSON.stringify(n)}),!e.useNtp&&e.setTime){let n=e.setTime;await (0,r.ri)(t,"/api/set-time/",{method:"POST",body:JSON.stringify({time:n.toISOString()})})}}},4421:function(e,t,n){n.d(t,{A:function(){return a}});var r=n(4893),s=n(1904);async function o(e){let[t,n]=e,r="global:modelName,global:userProvidedDeviceName",o=await (0,s.vn)(n,"/api/confs/?keys=".concat(r));r="release:date,release:version,release:updateState,release:latestPatch:version,release:latestMinor:version,release:latestMajor:version,release:scheduledUpgradeToTag,manufacturer:modeEnabled";let a=await (0,s.vn)(n,"/api/state/?keys=".concat(r)),i="no-update";if(a["release:scheduledUpgradeToTag"]){let e=a["release:scheduledUpgradeToTag"],t=e.split("/");t.length>1&&(e=t[1]),i={kind:"scheduled",version:e}}else"disabled"===a["release:updateState"]?i="disabled":"no-repo"===a["release:updateState"]?i="no-repo":"dirty-repo"===a["release:updateState"]?i="dirty-repo":"broken-repo"===a["release:updateState"]?i="broken-repo":"available-update-patch"===a["release:updateState"]?i={kind:"available",version:a["release:latestPatch:version"]||"unknown version"}:"available-update-minor"===a["release:updateState"]?i={kind:"available",version:a["release:latestMinor:version"]||"unknown version"}:"available-update-major"===a["release:updateState"]?i={kind:"available",version:a["release:latestMajor:version"]||"unknown version"}:"imminent-upgrade"===a["release:updateState"]&&(i="upgrading");return{userProvidedName:o["global:userProvidedDeviceName"]||void 0,modelName:o["global:modelName"]||"OPCB",manufacturerModeEnabled:"true"===a["manufacturer:modeEnabled"],firmwareVersion:a["release:version"]||"unknown",firmwareDate:a["release:date"]||"-",updateState:i}}function a(){return(0,r.tQ)("basic-settings",o)}},9111:function(e,t,n){n.d(t,{ZB:function(){return d}});var r=n(4893),s=n(716),o=n(3806),a=n(8919),i=n(1904);async function c(e){let[t,n]=e,r=await (0,i.vn)(n,"/api/confs/?keys=".concat("overvisReverseConnection:baseConnectUrl,overvisVpn:isEnabled,overvisVpn:pinCode,overvisVpn:wireguard:privateKey,overvisVpn:boundToOcpServer,overvisVpn:boundToOcpAccountEmail,overvisVpn:wireguard:vpnMotherlandServerIp,overvisVpn:wireguard:ipAddressCidr,elan:mac,global:model"));return{rcBaseConnectUrl:r["overvisReverseConnection:baseConnectUrl"],vpnIsEnabled:"true"===r["overvisVpn:isEnabled"],pinCode:r["overvisVpn:pinCode"],wgPrivateKey:r["overvisVpn:wireguard:privateKey"],vpnBoundToOcpServer:r["overvisVpn:boundToOcpServer"],vpnBoundToOcpAccountEmail:r["overvisVpn:boundToOcpAccountEmail"],mac:r["elan:mac"]||"<not set>",model:r["global:model"]||"<not set>",vpnMotherlandServerIp:r["overvisVpn:wireguard:vpnMotherlandServerIp"]||"<not set>",assignedVpnIp:r["overvisVpn:wireguard:ipAddressCidr"]||"<not set>"}}async function l(e){let[t,n]=e,r=await c(["/api/confs/",n]),l=await (0,i.vn)(n,"/api/state/");return{general:function(e){let t,n,r;let s=[];for(let t=0;t<16&&e.hasOwnProperty("sys:cpus:".concat(t));t++)s.push(Number(e["sys:cpus:".concat(t)]));return e.hasOwnProperty("storage:total")&&e.hasOwnProperty("storage:used")&&(t={totalBytes:Number(e["storage:total"]),usedBytes:Number(e["storage:used"])}),e.hasOwnProperty("temperature")&&(n=Math.round(10*Number(e.temperature))/10),e.hasOwnProperty("voltage")&&(r=Math.round(10*Number(e.voltage))/10),{time:{os:Math.round(Number(e["time:os"])),process:Math.round(Number(e["time:process"])),now:Math.round(Number(e["time:now"])/1e3)},cpus:s,firmware:{date:e["release:date"]||"-",version:e["release:version"]||"unknown"},ram:{totalBytes:Number(e["ram:total"]),usedBytes:Number(e["ram:used"])},storage:t,temperatureCelsius:n,voltage:r,manufacturerModeEnabled:"true"===e["manufacturer:modeEnabled"]}}(l),internet:function(e){let t={status:"disabled"};if(e.hasOwnProperty("inet:ping")){let n=e["inet:ping"];"unreachable"===n?t={status:"offline"}:(t={status:"online",ping:Number(n)},e.hasOwnProperty("inet:externalIp")&&(t.ip=e["inet:externalIp"]))}return t}(l),rc:function(e,t){let n,r;let s=e["overvisRc:status"]||"disabled",o=e["overvisRc:iface"],a=e["overvisRc:address"],i=e["overvisRc:lastError"],c=e["overvisRc:lastConnectionOn"];c&&(r=new Date(1e3*Number(c)).toISOString());let l=e["overvisRc:mac"],d=e["overvisRc:connectionAttemptsNum"],u=e["overvisRc:activationCode"],x=e["overvisRc:boundAccountEmail"],p=e["overvisRc:rx:total"],m=e["overvisRc:rx:connection"],h=e["overvisRc:rx:speed"],f=e["overvisRc:rx:lastTransferOn"],g=e["overvisRc:tx:total"],v=e["overvisRc:tx:connection"],b=e["overvisRc:tx:speed"],j=e["overvisRc:tx:lastTransferOn"];if("disabled"!==s&&o&&a&&l){if("waiting"!==s&&"connecting"!==s&&r){let e=Math.round((Date.now()-Number(r))/1e3),s={rxSpeedBytesPerSec:Number(h)||0,rxTotalBytes:Number(p)||0,rxConnectionBytes:Number(m)||0,rxLastBytesSinceSec:f?Math.round(Date.now()/1e3)-Number(f):0,txSpeedBytesPerSec:Number(b)||0,txTotalBytes:Number(g)||0,txConnectionBytes:Number(v)||0,txLastBytesSinceSec:j?Math.round(Date.now()/1e3)-Number(j):0};n=u?{status:"unbound",interface:o,mac:l,ocpServer:a,activationCode:u,bindLink:"".concat(t,"/manage/connect-rc/").concat(u,"/"),connectedSec:e,rxtx:s}:{status:"online",interface:o,mac:l,ocpServer:a,connectedSec:e,boundAccountEmail:x,openLink:"".concat(t,"/manage/net-by-mac/").concat(l,"/"),rxtx:s}}else n={status:"offline",attemptNum:Number(d)||0,interface:o,lastConnectionOn:r,mac:l,ocpServer:a,lastError:i}}else n={status:"disabled"};return n}(l,r.rcBaseConnectUrl||"https://ocp.overvis.com"),vpn:function(e,t){let n,{vpnIsEnabled:r,mac:s,wgPrivateKey:o,vpnBoundToOcpAccountEmail:a,vpnBoundToOcpServer:i,vpnMotherlandServerIp:c,pinCode:l,model:d,assignedVpnIp:u}=t,x="true"===e["wg:available"],p=e["wg:pubkey"],m=e["wg:ip"],h=e["wg:endpointAddress"],f=e["wg:endpointPubkey"],g=e["wg:ping"],v=e["wg:rx:total"],b=e["wg:tx:total"];if(r){if(o&&m&&p&&f&&h&&l){if(g&&"unreachable"!==g){let e=a?{status:"bound",boundAccountEmail:a,openLink:"https://".concat(i,"/manage/net-by-pin/").concat(l,"/")}:{status:"unbound",bindLink:"https://c.overvis.com/".concat(l)};n={status:"online",ip:m,serverPublicKey:f,vpnServer:h,binding:e,rxtx:{rxTotalBytes:Number(v)||0,txTotalBytes:Number(b)||0},interface:"wg0",serverInternalIp:c||"<not set>"}}else n={status:"offline",error:"Endpoint unreachable",ip:m,serverPublicKey:f,vpnServer:h,interface:"wg0",serverInternalIp:c||"<not set>"}}else n={status:"unregistered"}}else n={status:"disabled",available:x};return{model:d,pin:l||"<no pin>",mac:s,privateKey:o||"<no private key generated>",publicKey:p||"<no public key generated>",connection:n,assignedVpnIp:u}}(l,{vpnIsEnabled:r.vpnIsEnabled,wgPrivateKey:r.wgPrivateKey,vpnBoundToOcpAccountEmail:r.vpnBoundToOcpAccountEmail,vpnBoundToOcpServer:r.vpnBoundToOcpServer,pinCode:r.pinCode,mac:r.mac,model:r.model,vpnMotherlandServerIp:r.vpnMotherlandServerIp,assignedVpnIp:r.assignedVpnIp}),lan:function(e){let t=e["elan:iface"],n="true"===e["elan:dhcpEnabled"],r="true"===e["elan:available"],s=e["elan:ip"],o=e["elan:mask"],a=e["elan:gatewayIp"],i=e["elan:gatewayPing"];return t?i&&"unreachable"!==i&&a&&s&&o?{status:"connected",interface:t,gatewayIp:a,gatewayPingMs:Number(i),ip:s,mask:o}:{status:"disconnected",interface:t,error:"Gateway unreachable",dhcpEnabled:n}:{status:"disabled",available:r}}(l),wifi:function(e){let t=e["wlan:iface"],n="true"===e["wlan:available"],r="true"===e["wlan:isAp"],s=e["wlan:ssid"],o=e["wlan:ip"],a=e["wlan:mask"],i=e["wlan:gatewayIp"],c=e["wlan:gatewayPing"],l=e["wlan:strengthDbm"],d=e["wlan:channel"]&&parseInt(e["wlan:channel"])||void 0,u=e["wlan:band"];return t&&s?r?o&&a?{status:"ap",interface:t,ssid:s,ip:o,url:"setup.overvis.com",band:u,channel:d}:{status:"disconnected",interface:t,ssid:s}:o&&a&&i&&c&&"unreachable"!==c?{status:"connected",interface:t,ssid:s,ip:o,mask:a,gatewayIp:i,gatewayPingMs:Number(c),strengthDbm:l?Number(l):void 0}:{status:"disconnected",interface:t,ssid:s}:{status:"disabled",available:n}}(l),mobile:{status:"disabled"},rs485:a.MQ(l),mbtcpServer:o.MQ(l),mbtcpClients:s.MQ(l)}}function d(){let e=(0,r.tQ)("full-status",l,{refreshInterval:1e3,dedupingInterval:1e3});return{...e,error:e.error}}a.tY,a.gh,a.pk,a.ix,o.fV,s.we,s.mY,s.b$,o.we},716:function(e,t,n){n.d(t,{$z:function(){return i},MQ:function(){return o},b$:function(){return d},mY:function(){return l},we:function(){return c}});var r=n(4893),s=n(1904);function o(e){let t={};for(let n=0;n<16;n++){let r;let s=e["mbtcpClient:".concat(n,":status")];if(!s)continue;let o=e["mbtcpClient:".concat(n,":address")];if(!o)continue;let a=e["mbtcpClient:".concat(n,":iface")]||"eth0";if(!a)continue;let i=parseInt(e["mbtcpClient:".concat(n,":lastConnectionOn")]||"0"),c=e["mbtcpClient:".concat(n,":connectionAttemptsNum")],l=e["mbtcpClient:".concat(n,":lastError")],d=e["mbtcpClient:".concat(n,":rx:total")],u=e["mbtcpClient:".concat(n,":rx:speed")],x=e["mbtcpClient:".concat(n,":rx:lastTransferOn")],p=e["mbtcpClient:".concat(n,":tx:total")],m=e["mbtcpClient:".concat(n,":tx:speed")],h=e["mbtcpClient:".concat(n,":tx:lastTransferOn")];r="disabled"===s?{status:"disabled"}:"waiting"!==s&&"connecting"!==s&&i?{status:"connected",iface:a,connectedOn:new Date(1e3*Number(i)).toISOString(),rxtx:{rxTotalBytes:Number(d)||0,rxSpeedBytesPerSec:Number(u)||0,rxLastBytesSinceSec:x?Math.round(Date.now()/1e3)-Number(x):0,txTotalBytes:Number(p)||0,txSpeedBytesPerSec:Number(m)||0,txLastBytesSinceSec:h?Math.round(Date.now()/1e3)-Number(h):0}}:{status:"disconnected",iface:a,attemptsNum:Number(c)||0,lastError:l,lastConnectionOn:i?new Date(i).toISOString():void 0};let f=e["route:mbtcpClient:".concat(n)];t[o]={info:r,address:o,mode:{status:"master",routes:f||"no routing"}}}return t}async function a(e){let[t,n]=e;return o(await (0,s.UK)(n,["mbtcpClient:*","route:mbtcpClient:*"]))}function i(){return(0,r.tQ)("mbtcp-clients",a,{refreshInterval:1e3})}let c={address:"192.168.1.14:502",mode:{status:"master",routes:"1-110,112-255"},info:{status:"disabled"}},l={address:"192.168.1.15:502",mode:{status:"master",routes:"1-110,112-255"},info:{status:"disconnected",iface:"eth0",attemptsNum:33,lastError:"Connection reset by peer."}},d={address:"192.168.1.16:502",mode:{status:"master",routes:"1-110,112-255"},info:{status:"connected",iface:"eth0",connectedOn:"2022-12-05T12:34:56Z",rxtx:{rxTotalBytes:123456789,rxSpeedBytesPerSec:1234,rxLastBytesSinceSec:2,txTotalBytes:987654321,txSpeedBytesPerSec:4321,txLastBytesSinceSec:14}}}},3806:function(e,t,n){n.d(t,{$z:function(){return i},MQ:function(){return o},fV:function(){return c},we:function(){return l}});var r=n(4893),s=n(1904);function o(e){let t="true"===e["mbtcpServer:enabled"],n=e["mbtcpServer:iface"];"*"===n&&(n="any");let r=e["mbtcpServer:listenIp"],s=e["mbtcpServer:listenPort"],o=[];for(let t=0;t<16;t++){let n=e["mbtcpServer:client:".concat(t,":address")];if(!n)continue;let r=e["mbtcpServer:client:".concat(t,":connectedOn")];if(!r)continue;let s=e["mbtcpServer:client:".concat(t,":iface")]||"unknown interface",a=e["mbtcpServer:client:".concat(t,":rx:total")],i=e["mbtcpServer:client:".concat(t,":rx:speed")],c=e["mbtcpServer:client:".concat(t,":rx:lastTransferOn")],l=e["mbtcpServer:client:".concat(t,":tx:total")],d=e["mbtcpServer:client:".concat(t,":tx:speed")],u=e["mbtcpServer:client:".concat(t,":tx:lastTransferOn")];o.push({address:n,mode:{status:"master"},connectedOn:new Date(1e3*Number(r)).toISOString(),iface:s,rxtx:{rxTotalBytes:Number(a)||0,rxSpeedBytesPerSec:Number(i)||0,rxLastBytesSinceSec:c?Math.round(Date.now()/1e3)-Number(c):0,txTotalBytes:Number(l)||0,txSpeedBytesPerSec:Number(d)||0,txLastBytesSinceSec:u?Math.round(Date.now()/1e3)-Number(u):0}})}return t&&n&&r&&s?{status:"online",clients:o,interface:n,listenIp:r,listenPort:Number(s)}:{status:"disabled"}}async function a(e){let[t,n]=e;return o(await (0,s.UK)(n,["mbtcpServer:*"]))}function i(){return(0,r.tQ)("modbus-tcp-server-status",a,{refreshInterval:1e3})}let c={status:"online",interface:"eth0",listenIp:"0.0.0.0",listenPort:502,clients:[{address:"192.168.0.13:12345",connectedOn:"2022-12-05T12:34:56Z",mode:{status:"master"},iface:"eth0",rxtx:{rxTotalBytes:123456789,rxSpeedBytesPerSec:1234,rxLastBytesSinceSec:2,txTotalBytes:987654321,txSpeedBytesPerSec:4321,txLastBytesSinceSec:14}},{address:"192.168.0.14:12345",connectedOn:"2022-12-05T12:34:56Z",mode:{status:"master"},iface:"wlan",rxtx:{rxTotalBytes:123456789,rxSpeedBytesPerSec:1234,rxLastBytesSinceSec:2,txTotalBytes:987654321,txSpeedBytesPerSec:4321,txLastBytesSinceSec:14}}]},l={status:"disabled"}},8919:function(e,t,n){n.d(t,{MQ:function(){return o},RW:function(){return i},gh:function(){return u},ix:function(){return d},pk:function(){return l},tY:function(){return c}});var r=n(4893),s=n(1904);function o(e){let t={};for(let n=0;n<16;n++){let r,s;let o=e["rs485:".concat(n,":dev")];if(!o)continue;let a=e["rs485:".concat(n,":status")],i=e["rs485:".concat(n,":lastError")],c=e["rs485:".concat(n,":attemptsNum")],l=e["rs485:".concat(n,":connectedOn")],d=e["rs485:".concat(n,":rx:total")],u=e["rs485:".concat(n,":rx:speed")],x=e["rs485:".concat(n,":rx:lastTransferOn")],p=e["rs485:".concat(n,":tx:total")],m=e["rs485:".concat(n,":tx:speed")],h=e["rs485:".concat(n,":tx:lastTransferOn")],f=e["rs485:".concat(n,":mode")],g=e["route:rs485:".concat(n)];if(r="rtu-master"===f?{status:"master",routes:g||"no routing",isAscii:!1}:"ascii-master"===f?{status:"master",routes:g||"no routing",isAscii:!0}:"rtu-slave"===f?{status:"slave",isAscii:!1}:{status:"slave",isAscii:!0},"disabled"===a)s={status:"disabled"};else if("attempting"!==a&&l){let e=[(s={status:"connected",connectedOn:new Date(1e3*Number(l)).toISOString(),rxtx:{rxTotalBytes:Number(d)||0,rxSpeedBytesPerSec:Number(u)||0,rxLastBytesSinceSec:x&&"0"!==x?Math.round(Date.now()/1e3)-Number(x):void 0,txTotalBytes:Number(p)||0,txSpeedBytesPerSec:Number(m)||0,txLastBytesSinceSec:h&&"0"!==h?Math.round(Date.now()/1e3)-Number(h):void 0}}).rxtx.rxLastBytesSinceSec,s.rxtx.txLastBytesSinceSec].filter(e=>void 0!==e);e.length>0&&(s.lastTransferOnSinceSec=Math.min(...e))}else s={status:"attempting",attemptsNum:Number(c)||0,lastError:i};t[o]={device:o,mode:r,info:s}}return t}async function a(e){let[t,n]=e;return o(await (0,s.UK)(n,["rs485:*","route:rs485:*"]))}function i(){return(0,r.tQ)("rs485-status",a,{refreshInterval:1e3})}let c={device:"devTty1",mode:{status:"master",routes:"1-110,112-255",isAscii:!1},info:{status:"disabled"}},l={device:"devTty2",mode:{status:"slave",isAscii:!0},info:{status:"attempting",attemptsNum:33,lastConnectedOn:"2022-12-04T12:34:56Z",lastError:"No answer."}},d={device:"devTty3",mode:{status:"slave",isAscii:!0},info:{status:"connected",connectedOn:"2022-12-05T12:34:56Z",rxtx:{rxTotalBytes:123456789,rxSpeedBytesPerSec:1234,rxLastBytesSinceSec:2,txTotalBytes:987654321,txSpeedBytesPerSec:4321,txLastBytesSinceSec:1400}}},u={device:"devTty4",mode:{status:"master",routes:"1-110,112-255",isAscii:!1},info:{status:"connected",connectedOn:"2022-12-05T12:34:56Z",rxtx:{rxTotalBytes:123456789,rxSpeedBytesPerSec:1234,rxLastBytesSinceSec:2,txTotalBytes:987654321,txSpeedBytesPerSec:4321,txLastBytesSinceSec:1400}}}},3071:function(e,t,n){function r(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}function s(e){let t=0;e>59&&(t=Math.floor(e/60),e%=60);let n=0;t>59&&(n=Math.floor(t/60),t%=60);let r=0;n>23&&(r=Math.floor(n/24),n%=24);let s=[];return r>0&&s.push(r+"d"),(n>0||s.length>0)&&s.push(n+"h"),(t>0||s.length>0)&&s.push(t+"m"),s.push(e+"s"),s.join(" ")}function o(e){return e<100?"good":e<200?"medium":"bad"}function a(e){return e.replace(/[\s-:]/g,"").toLowerCase().trim()}function i(e){return e.trim().toLowerCase().match(/.{1,2}/g).join(" ")}n.d(t,{Ch:function(){return s},k:function(){return o},td:function(){return r},uv:function(){return a},zF:function(){return i}})}}]);