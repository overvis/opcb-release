"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{5973:function(e,n,s){s.d(n,{Z:function(){return CenteredStatusInfo}});var t=s(966),o=s(8255),r=s(462),i=s(7344),c=s(3979),a=s(9956),l=s(431);function CenteredStatusInfo(e){let{icon:n,text:s,description:d,children:u,color:x,...h}=e;return(0,t.jsx)(o.M,{h:"100%",p:"xs",...h,children:(0,t.jsxs)(r.K,{p:"sm",spacing:"xs",align:"center",justify:"center",children:[(0,t.jsxs)(i.Z,{spacing:"xs",align:"start",position:"center",children:[(0,t.jsx)(c.k,{color:x||"black",size:"md",variant:"outline",sx:{border:"none"},children:n||(0,t.jsx)(l.Z,{})}),(0,t.jsx)(a.x,{color:x||"black",align:"center",children:s})]}),d&&(0,t.jsx)(a.x,{size:"xs",color:"dimmed",align:"center",children:d}),u]})})}},6435:function(e,n,s){s.d(n,{Z:function(){return ConnectionsLayout}});var t=s(966),o=s(9025),r=s(7344),i=s(3960),c=s(8822),a=s(5040),l=s(3127),d=s(4985),u=s(4853),x=s(937),h=s(8769),p=s(1407),m=s(8392),g=s(9640),j=s(7097),b=s.n(j),f=s(2094);let v=(0,o.k)(e=>({navlink:{color:e.colors.blue[6],"&:hover":{color:e.colors.dark,backgroundColor:"transparent"},"&[data-active]":{color:e.colors.dark,backgroundColor:"transparent",borderRight:"2px solid #000",pointerEvents:"none"}}}));function ConnectionsLayout(e){let{children:n,pageId:s,title:o}=e,{classes:j}=v();return(0,t.jsx)(f.Z,{pageTitle:"Connections :: ".concat(o),children:(0,t.jsxs)(r.Z,{align:"stretch",position:"left",noWrap:!0,children:[(0,t.jsx)(i.z,{smallerThan:"md",styles:{width:50,whiteSpace:"nowrap",marginLeft:-25},children:(0,t.jsx)(c.w,{width:{md:200},ml:"-sm",mih:0,height:"auto",children:(0,t.jsxs)(c.w.Section,{children:[(0,t.jsx)(a.O,{component:b(),href:"/connections/modbus-rs485",label:"Modbus over RS-485",icon:(0,t.jsx)(d.Z,{size:16,stroke:1.5}),active:"modbus-rs485"===s,className:j.navlink}),(0,t.jsx)(a.O,{component:b(),href:"/connections/modbus-tcp-server",label:"Modbus TCP Server",icon:(0,t.jsx)(u.Z,{size:16,stroke:1.5}),active:"modbus-tcp-server"===s,className:j.navlink}),(0,t.jsx)(a.O,{component:b(),href:"/connections/modbus-tcp-client",label:"Modbus TCP Client",icon:(0,t.jsx)(x.Z,{size:16,stroke:1.5}),active:"modbus-tcp-client"===s,className:j.navlink}),(0,t.jsx)(a.O,{component:b(),href:"/connections/opcb-modbus-access",label:"OPCB Modbus Access",icon:(0,t.jsx)(h.Z,{size:16,stroke:1.5}),active:"opcb-modbus-access"===s,className:j.navlink}),(0,t.jsx)(a.O,{component:b(),href:"/connections/lora-sens",label:"LoraSens",icon:(0,t.jsx)(p.Z,{size:16,stroke:1.5}),active:"lora-sens"===s,className:j.navlink}),(0,t.jsx)(a.O,{component:b(),href:"/connections/mqtt",label:"MQTT Broker",icon:(0,t.jsx)(m.Z,{size:16,stroke:1.5}),active:"mqtt"===s,className:j.navlink}),(0,t.jsx)(a.O,{component:b(),href:"/connections/overvis-modbus-tcp",label:"Overvis Modbus TCP",icon:(0,t.jsx)(g.Z,{size:16,stroke:1.5}),active:"overvis-modbus-tcp"===s,className:j.navlink})]})})}),(0,t.jsx)(l.x,{sx:{flexGrow:1},children:n})]})})}},5451:function(e,n,s){s.d(n,{Z:function(){return DisabledStatus}});var t=s(966),o=s(5973);function DisabledStatus(e){let{error:n,...s}=e;return(0,t.jsx)(o.Z,{...s,p:"xs",bg:"gray.0",color:n?"red":"gray"})}},4101:function(e,n,s){s.d(n,{Z:function(){return ModbusStreamLog}});var t=s(966),o=s(462),r=s(7344),i=s(9956),c=s(3283),a=s(8598),l=s(5006),d=s(3636),u=s(9810),x=s(4939),h=s(9994),p=s(2383),m=s(6319),g=s(3900),j=s(9342),b=s(9416),f=s(1489);function ModbusStreamLog(e){let{mode:n,streamName:s}=e,[v,k]=(0,g.useState)(!1),[Z,w]=(0,g.useState)(!1),{messageHistory:y,setMessageHistory:z,socketReadyState:S}=(0,f.Y)("/api/log/stream/".concat(s,"/"),e=>(0,j.Gt)(e,n),v),C=(0,g.useRef)(null),R=(0,l.V)({timeout:500});return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(o.K,{spacing:0,h:"100%",maw:"870px",children:[(0,t.jsxs)(r.Z,{sx:e=>({borderBottom:"1px solid ".concat(e.colors.gray[3])}),py:"xs",children:[(0,t.jsx)(i.x,{size:"sm",transform:"uppercase",weight:700,color:"gray.9",children:"Real-time transfer log"}),(0,t.jsxs)(c.z,{compact:!0,variant:"subtle",radius:"lg",size:"xs",onClick:()=>{R.copy(y.map(e=>e.raw).join("\n"))},children:[(0,t.jsx)(d.Z,{size:12,style:{marginRight:4}}),"Copy"]}),(0,t.jsxs)(c.z,{compact:!0,variant:"subtle",radius:"lg",size:"xs",bg:v?"gray.3":"",onClick:()=>k(!v),children:[v?(0,t.jsx)(u.Z,{size:12,style:{marginRight:4}}):(0,t.jsx)(x.Z,{size:12,style:{marginRight:4}}),v?"Resume":"Pause"]}),(0,t.jsxs)(c.z,{compact:!0,variant:"subtle",radius:"lg",size:"xs",onClick:()=>z([]),children:[(0,t.jsx)(h.Z,{size:12,style:{marginRight:4}}),"Clear"]}),(0,t.jsxs)(c.z,{compact:!0,variant:"subtle",radius:"lg",size:"xs",onClick:()=>w(!Z),children:[Z?(0,t.jsx)(p.Z,{size:12,style:{marginRight:4}}):(0,t.jsx)(m.Z,{size:12,style:{marginRight:4}}),Z?"Resume scrolling":"Pause scrolling"]})]}),(0,t.jsx)(a.x,{h:550,sx:{flexGrow:1},viewportRef:C,children:(0,t.jsx)(b.Z,{socketState:S,scrollLogHandler:()=>{C.current&&!Z&&C.current.scrollTo({top:C.current.scrollHeight,behavior:"auto"})},children:y})})]})})}},3732:function(e,n,s){s.d(n,{Z:function(){return StatusBlock}});var t=s(966),o=s(4418),r=s(462),i=s(7344),c=s(3979),a=s(9956),l=s(9977),d=s(3127),u=s(8637);function StatusBlock(e){let n="connected"===e.status?"green":"warn"===e.status?"orange":"disconnected"===e.status?"red":"gray";return(0,t.jsx)(o.X,{h:"100%",withBorder:!0,children:(0,t.jsxs)(r.K,{spacing:0,h:"100%",children:[(0,t.jsxs)(i.Z,{position:"apart",align:"center",p:"xs",sx:e=>({borderBottom:"1px solid ".concat(e.colors.gray[3])}),children:[(0,t.jsxs)(i.Z,{spacing:"xs",noWrap:!0,children:[(0,t.jsx)(c.k,{color:n,variant:"light",children:e.icon}),(0,t.jsx)(a.x,{weight:500,c:n,transform:"uppercase",children:e.name}),e.addEl&&"string"==typeof e.addEl?(0,t.jsx)(a.x,{c:"dimmed",size:"sm",children:e.addEl}):e.addEl]}),(0,t.jsxs)(i.Z,{spacing:"xs",noWrap:!0,children:[e.addElRight,e.settingsAction&&(0,t.jsx)(l.A,{color:"blue",onClick:e.settingsAction,children:(0,t.jsx)(u.Z,{size:18})})]})]}),(0,t.jsx)(d.x,{bg:e.bg,h:"100%",children:e.children})]})})}},169:function(e,n,s){s.d(n,{Z:function(){return StatusBlockWithSettings}});var t=s(966),o=s(3900),r=s(8253),i=s(3732);function StatusBlockWithSettings(e){let[n,s]=(0,o.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Z,{...e.settings,opened:n,setOpened:s}),(0,t.jsx)(i.Z,{...e,settingsAction:()=>s(!0),children:e.children})]})}},3610:function(e,n,s){s.d(n,{Z:function(){return ValueDisplay}});var t=s(966),o=s(9956),r=s(7344),i=s(462);function ValueDisplay(e){let{icon:n,name:s,subNameVal:c,nameColor:a="dimmed",mainVal:l,subVal:d,oneline:u}=e,x=!function(e){for(var n=arguments.length,s=Array(n>1?n-1:0),t=1;t<n;t++)s[t-1]=arguments[t];return"object"==typeof e&&null!==e&&s.every(n=>n in e)}(d,"value","level")?d:(0,t.jsxs)(t.Fragment,{children:[d.name&&d.name+" ",(0,t.jsx)(o.x,{span:!0,c:"good"===d.level?"green":"medium"===d.level?"orange":"bad"===d.level?"red":"dimmed",transform:"none",children:d.value})]}),h=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.Z,{spacing:5,children:[(0,t.jsx)(o.x,{weight:"bold",size:"xs",color:a,transform:"uppercase",children:s}),c&&(0,t.jsx)(o.x,{size:10,color:"dimmed",children:c})]}),(0,t.jsx)(o.x,{fz:"xs",color:"black",children:l}),x&&(0,t.jsx)(o.x,{size:10,color:"dimmed",children:x})]});return u?(0,t.jsxs)(r.Z,{spacing:5,align:"baseline",noWrap:!0,children:[(0,t.jsx)("div",{style:{position:"relative",top:"2px",marginTop:"-5px",marginRight:"-4px"},children:n}),h]}):(0,t.jsxs)(r.Z,{spacing:0,align:"baseline",noWrap:!0,children:[(0,t.jsx)("div",{style:{position:"relative",top:"2px",marginTop:"-5px"},children:n}),(0,t.jsx)(i.K,{spacing:0,children:h})]})}s(3900)},1489:function(e,n,s){s.d(n,{Y:function(){return useWebSocketStream}});var t=s(3900),o=s(1264),r=s(9804);function useWebSocketStream(e,n,s){let i=window.location.hostname,c=window.location.port,a="https:"===window.location.protocol?"wss":"ws",l="".concat(a,"://").concat(i,":").concat(c).concat(e),[d,u]=(0,t.useState)([]),{lastMessage:x,readyState:h}=(0,o.ZP)(l,{onError:e=>console.error("Log socket closed with error: ".concat(e)),onClose:e=>{console.log("Log socket closed: "+e),u(e=>e.concat({id:Math.floor(1e9*Math.random()),raw:"Log socket interrupted.",date:(0,r.k6)(new Date),type:"close"}))},onOpen:()=>{u(e=>e.concat({id:Math.floor(1e9*Math.random()),raw:"Log socket opened.",date:(0,r.k6)(new Date),type:"open"}))},shouldReconnect:()=>!0,reconnectAttempts:5,reconnectInterval:1e3});return(0,t.useEffect)(()=>{null===x||s||u(e=>{let s=n?n(x.data):x.data;return e.find(e=>e.id===s.id)?e:e.concat(s).slice(-1e3)})},[x,u]),{messageHistory:d,setMessageHistory:u,socketReadyState:h}}}}]);