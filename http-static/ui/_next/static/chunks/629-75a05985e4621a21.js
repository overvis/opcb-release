"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{7723:function(a,e,n){var t=n(9025);e.Z=(0,t.k)(a=>({dirtyInput:{backgroundColor:a.colors.blue[0]}}))},29:function(a,e,n){n.d(e,{Z:function(){return InputWithHelp}});var t=n(966),i=n(7344),s=n(9956),l=n(8255),r=n(8482),o=n(5897),u=n(3900);function InputWithHelp(a){let{children:e}=a,[n,d]=(0,u.useState)(!1);return(0,t.jsx)(e.type,{...Object.fromEntries(Object.entries(e.props)),labelProps:{display:"block"},label:(0,t.jsxs)(i.Z,{mb:"4px",spacing:5,children:[e.props.label,(0,t.jsx)(s.x,{children:(e.props.withAsterisk||e.props.required)&&(0,t.jsx)(s.x,{span:!0,color:"red","aria-hidden":!0,children:" *"})}),(0,t.jsx)(s.x,{ml:"auto",color:"blue",sx:{cursor:"pointer"},onClick:a=>{d(!n),a.preventDefault()},children:(0,t.jsx)(l.M,{children:(0,t.jsx)(o.Z,{size:14,stroke:1.5})})})]}),description:(0,t.jsx)(r.U,{in:n,transitionDuration:100,children:(0,t.jsx)(s.x,{size:"xs",color:"gray.6",lh:"14px",children:e.props.description})}),withAsterisk:!1})}},7132:function(a,e,n){n.d(e,{Z:function(){return LanSettingsFormFields}});var t=n(966),i=n(7723),s=n(29),l=n(9606),r=n(4994),o=n(462),u=n(7432),d=n(6078);function LanSettingsFormFields(a){let{form:e}=a,{classes:n}=(0,i.Z)(),[c,p,g,m]=(0,r.iM)([e.values.elan.iface],["lo","wg0","wlan0"]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{children:(0,t.jsx)(l.Z,{label:"Interface:",data:c,isLoading:p,addValue:a=>{m(e=>e.concat(a))},update:g,description:"Internal Linux interface to use for Ethernet connection. If your device has one LAN port, default value (eth0) is the correct one.",classNames:{input:e.isDirty("elan.elan.iface")&&n.dirtyInput||void 0},...e.getInputProps("elan.iface")})}),""!==e.values.elan.iface&&(0,t.jsxs)(o.K,{children:[(0,t.jsx)(u.s,{data:[{value:"dhcp",label:"Automatic (DHCP)"},{value:"manual",label:"Manual settings"}],classNames:{root:e.isDirty("elan.ipMode")&&n.dirtyInput||void 0},...e.getInputProps("elan.ipMode")}),"manual"===e.values.elan.ipMode&&(0,t.jsxs)(o.K,{children:[(0,t.jsx)(d.o,{label:"IP address:",classNames:{input:e.isDirty("elan.manual.ip")&&n.dirtyInput||void 0},...e.getInputProps("elan.manual.ip"),required:!0}),(0,t.jsx)(d.o,{label:"Network mask:",classNames:{input:e.isDirty("elan.manual.mask")&&n.dirtyInput||void 0},...e.getInputProps("elan.manual.mask"),required:!0}),(0,t.jsx)(d.o,{label:"Gateway IP:",classNames:{input:e.isDirty("elan.manual.gateway")&&n.dirtyInput||void 0},...e.getInputProps("elan.manual.gateway"),required:!0}),(0,t.jsx)(d.o,{label:"Primary DNS IP:",classNames:{input:e.isDirty("elan.manual.dns1")&&n.dirtyInput||void 0},...e.getInputProps("elan.manual.dns1"),required:!0}),(0,t.jsx)(d.o,{label:"Secondary DNS IP:",classNames:{input:e.isDirty("elan.manual.dns2")&&n.dirtyInput||void 0},...e.getInputProps("elan.manual.dns2"),required:!0})]})]})]})}},9606:function(a,e,n){n.d(e,{Z:function(){return LoadingSelect}});var t=n(966),i=n(1949),s=n(6886),l=n(7344),r=n(3624),o=n(7153),u=n(2968);function LoadingSelect(a){let e=(0,i.rZ)();return(0,t.jsx)(s.Ph,{...Object.fromEntries(Object.entries(a).filter(a=>{let[e]=a;return -1===["addValue","update","isLoading"].indexOf(e)})),searchable:!0,creatable:!0,withinPortal:!0,label:a.label,nothingFound:"Nothing found",getCreateLabel:a=>"+ Add interface: ".concat(a),onCreate:e=>(a.addValue(e),{value:e,label:e}),rightSectionWidth:50,rightSection:(0,t.jsxs)(l.Z,{spacing:"xs",position:"right",children:[a.isLoading?(0,t.jsx)(r.a,{size:14}):(0,t.jsx)(u.Z,{color:e.colors.blue[6],size:14,onClick:()=>{a.update()},style:{cursor:"pointer",pointerEvents:"all"}}),(0,t.jsx)(o.D,{size:"md",error:a.error})]}),styles:{rightSection:{pointerEvents:"none"}}})}},4080:function(a,e,n){n.d(e,{Z:function(){return WifiSettingsFormFields}});var t=n(966),i=n(462),s=n(6886),l=n(7432),r=n(6078),o=n(1277),u=n(8512),d=n(4994),c=n(281),p=n(3900),g=n(52);async function fetcher(a){let[e,n]=a;return(await (0,g.ri)(n,e,{timeoutMs:3e4})).json()}var m=n(7723),w=n(29),S=n(9606);function WifiSettingsFormFields(a){let{form:e}=a,{classes:n}=(0,m.Z)(),[h,f,I,y]=(0,d.iM)([e.values.wlan.iface],["lo","wg0","eth0"]),[b,v,M,P]=function(a){let[e,n]=(0,p.useState)([a]),{data:t,mutate:i,isLoading:s}=function(){let a=(0,g.tQ)("/api/list/wifi-aps/",fetcher);return{data:a.data,isLoading:a.isLoading||a.isValidating,mutate:e=>{e?a.mutate(e,{revalidate:!1}):a.mutate()}}}(),l=[];if(t)for(let a of t)l.find(e=>e.value===a.ssid)||l.push({value:a.ssid,label:"".concat(a.ssid," (").concat(a.signal,"dBm)")});for(let a of e)l.find(e=>e.value===a)||l.push({value:a,label:a});return[l,s,i,n]}(e.values.wlan.client.ssid);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Z,{children:(0,t.jsx)(S.Z,{label:"Interface:",data:h,isLoading:f,addValue:a=>{y(e=>e.concat(a))},update:I,description:(0,t.jsxs)(t.Fragment,{children:["Internal Linux interface to use for Wi-Fi connection. Default value (wlan0) should be changed only if you are using external (USB) Wi-Fi modems.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),'Select "Disabled" to disable Wi-Fi completely.']}),classNames:{input:e.isDirty("wlan.iface")&&n.dirtyInput||void 0},...e.getInputProps("wlan.iface")})}),""!==e.values.wlan.iface&&(0,t.jsxs)(i.K,{children:[(0,t.jsx)(w.Z,{children:(0,t.jsx)(s.Ph,{label:"Country:",description:"Selected legislation will affect allowed Wi-Fi frequencies.",searchable:!0,withinPortal:!0,data:u.Zd,classNames:{input:e.isDirty("wlan.country")&&n.dirtyInput||void 0},...e.getInputProps("wlan.country")})}),(0,t.jsx)(l.s,{data:[{value:"ap",label:"Access Point"},{value:"client",label:"Client"}],classNames:{root:e.isDirty("wlan.mode")&&n.dirtyInput||void 0},...e.getInputProps("wlan.mode")}),"ap"===e.values.wlan.mode?(0,t.jsxs)(i.K,{children:[(0,t.jsx)(w.Z,{children:(0,t.jsx)(r.o,{label:"Access Point SSID (name):",description:'Name of the Wi-Fi network that will be created by the device. If this field is empty, OPCB will generate a name in format "OPCB_XXXXXX", where XXXXXX are last 6 digits of the device\'s MAC.',classNames:{input:e.isDirty("wlan.ap.ssid")&&n.dirtyInput||void 0},...e.getInputProps("wlan.ap.ssid")})}),(0,t.jsx)(w.Z,{children:(0,t.jsx)(o.W,{label:"Access Point password:",description:"Password for the Wi-Fi network that will be created by the device.",classNames:{input:e.isDirty("wlan.ap.password")&&n.dirtyInput||void 0},...e.getInputProps("wlan.ap.password"),value:e.values.wlan.ap.password===c.Ak?"<encrypted>":e.values.wlan.ap.password||""})})]}):(0,t.jsxs)(i.K,{children:[(0,t.jsx)(w.Z,{children:(0,t.jsx)(S.Z,{label:"Station SSID (name):",description:"Name of the Wi-Fi network. Number in parenthesis shows signal strength - values are negative, so the smaller absolute value is better.",data:b,isLoading:v,addValue:a=>{P(e=>e.concat(a))},update:M,classNames:{input:e.isDirty("wlan.client.ssid")&&n.dirtyInput||void 0},...e.getInputProps("wlan.client.ssid"),required:!0})}),(0,t.jsx)(o.W,{label:"Station password:",classNames:{input:e.isDirty("wlan.client.password")&&n.dirtyInput||void 0},...e.getInputProps("wlan.client.password"),value:e.values.wlan.client.password===c.Ak?"<encrypted>":e.values.wlan.client.password||""}),(0,t.jsx)(l.s,{data:[{value:"dhcp",label:"Automatic (DHCP)"},{value:"manual",label:"Manual settings"}],classNames:{root:e.isDirty("wlan.client.ipMode")&&n.dirtyInput||void 0},...e.getInputProps("wlan.client.ipMode")}),"manual"===e.values.wlan.client.ipMode&&(0,t.jsxs)(i.K,{children:[(0,t.jsx)(r.o,{label:"IP address:",classNames:{input:e.isDirty("wlan.client.manual.ip")&&n.dirtyInput||void 0},...e.getInputProps("wlan.client.manual.ip"),required:!0}),(0,t.jsx)(r.o,{label:"Network mask:",classNames:{input:e.isDirty("wlan.client.manual.mask")&&n.dirtyInput||void 0},...e.getInputProps("wlan.client.manual.mask"),required:!0}),(0,t.jsx)(r.o,{label:"Gateway IP:",classNames:{input:e.isDirty("wlan.client.manual.gateway")&&n.dirtyInput||void 0},...e.getInputProps("wlan.client.manual.gateway"),required:!0}),(0,t.jsx)(r.o,{label:"Primary DNS IP:",classNames:{input:e.isDirty("wlan.client.manual.dns1")&&n.dirtyInput||void 0},...e.getInputProps("wlan.client.manual.dns1"),required:!0}),(0,t.jsx)(r.o,{label:"Secondary DNS IP:",classNames:{input:e.isDirty("wlan.client.manual.dns2")&&n.dirtyInput||void 0},...e.getInputProps("wlan.client.manual.dns2"),required:!0})]})]})]})]})}},7219:function(a,e,n){n.d(e,{Mx:function(){return saveProcedure},_B:function(){return getDirtyValues},_N:function(){return useFormWithInitialUpdates},uA:function(){return makeInputPropsGen}});var t=n(966),i=n(7344),s=n(9956),l=n(9724),r=n(6680),o=n(7017),u=n(2922),d=n(1457),c=n(3900),p=n(9804);async function saveProcedure(a){(0,r.yK)("settings-save"),(0,r.c0)({id:"settings-save",withCloseButton:!0,autoClose:!1,loading:!0,icon:null,color:"orange",title:"Saving settings...",message:"Please wait while the new settings are applied..."});try{await a()}catch(a){(0,r.wD)({id:"settings-save",loading:!1,withCloseButton:!0,color:"red",icon:(0,t.jsx)(o.Z,{}),title:"Error saving settings",message:"There was an error saving settings. Please check form data and try again."}),console.error(a);return}(0,r.wD)({id:"settings-save",loading:!1,withCloseButton:!0,autoClose:1e3,color:"green",icon:(0,t.jsx)(u.Z,{}),title:"Settings saved",message:"Settings were saved and applied successfully."})}function makeInputPropsGen(a,e,n){return function(l){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input",o=arguments.length>2?arguments[2]:void 0;return function(a,e,n,l,r){let o=a.getInputProps(e,n),u=r&&r>300;return{...o,classNames:{input:a.isDirty(e)&&l||void 0},inputContainer:u?a=>(0,t.jsxs)(t.Fragment,{children:[a,(0,t.jsxs)(i.Z,{spacing:3,c:"orange",mt:2,align:"center",children:[(0,t.jsx)(d.Z,{size:11,style:{marginTop:-1}}),(0,t.jsxs)(s.x,{fz:"xs",children:["Updated: ",(0,p.LU)(1e3*r)," ago."]})]})]}):void 0}}(a,l,{...n,type:r},e,o)}}function useFormWithInitialUpdates(a){let e=(0,l.c)(a);return(0,c.useEffect)(()=>{for(let n in e.values)e.isDirty(n)||e.setFieldValue(n,a.initialValues[n]);e.resetDirty({...a.initialValues})},[...Object.values(a.initialValues)]),e}function getDirtyValues(a){return Object.fromEntries(Object.entries(a.values).filter(e=>{let[n,t]=e;return a.isDirty(n)&&void 0!==t}))}},8512:function(a,e,n){n.d(e,{X6:function(){return getBrowsetTimezone},Zd:function(){return t}});let t=Object.entries({AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:["People's Republic of China","China"],CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:["Republic of the Congo","Congo"],CD:["Democratic Republic of the Congo","Congo"],CK:"Cook Islands",CR:"Costa Rica",CI:["Cote D'Ivoire","Ivory Coast"],HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:["Czech Republic","Czechia"],DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:["Republic of The Gambia","The Gambia","Gambia"],GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:["Islamic Republic of Iran","Iran"],IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova, Republic of",MC:"Monaco",MN:"Mongolia",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MK:["The Republic of North Macedonia","North Macedonia"],MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:["State of Palestine","Palestine"],PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:["Russian Federation","Russia"],RW:"Rwanda",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Eswatini",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:["Taiwan, Province of China","Taiwan"],TJ:"Tajikistan",TZ:["United Republic of Tanzania","Tanzania"],TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"T\xfcrkiye",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:["United Kingdom","UK","Great Britain"],US:["United States of America","United States","USA"],UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Vietnam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",AX:"\xc5land Islands",BQ:"Bonaire, Sint Eustatius and Saba",CW:"Cura\xe7ao",GG:"Guernsey",IM:"Isle of Man",JE:"Jersey",ME:"Montenegro",BL:"Saint Barth\xe9lemy",MF:"Saint Martin (French part)",RS:"Serbia",SX:"Sint Maarten (Dutch part)",SS:"South Sudan",XK:"Kosovo"}).map(a=>{let[e,n]=a;return{value:e,label:Array.isArray(n)?n[0]:n}});function getBrowsetTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}},4994:function(a,e,n){n.d(e,{iM:function(){return useNetifsSelectItems}});var t=n(3900),i=n(52);async function fetchNetifs(a){let[e,n]=a;return(await (0,i.ri)(n,e)).json()}function useNetifsSelectItems(a,e){let[n,s]=(0,t.useState)(a),{data:l,mutate:r,isLoading:o}=function(){let a=(0,i.tQ)("/api/list/netifs/",fetchNetifs);return{data:a.data,isLoading:a.isLoading||a.isValidating,mutate:e=>{e?a.mutate(e,{revalidate:!1}):a.mutate()}}}(),u=[{value:"",label:"Disabled"}];return[u=(u=u.concat(...l?l.filter(a=>!e.includes(a)).map(a=>({value:a,label:a})):[])).concat(...n.filter(a=>"any"!==a&&""!==a&&!(null==l?void 0:l.includes(a))).map(a=>({value:a,label:a}))),o,r,s]}},4859:function(a,e,n){n.d(e,{Rx:function(){return l},Up:function(){return makeRecord},rV:function(){return useSettings},zQ:function(){return saveSettings}});var t=n(52),i=n(3738),s=n(6169);async function settingsFetcher(a){let[e,n]=a,t=await (0,i.wv)(n,["elan:networkInterfaceName","elan:dhcpIsEnabled","elan:staticIpSettings:ipAddress","elan:staticIpSettings:subnetMask","elan:staticIpSettings:gateway","elan:staticIpSettings:primaryDns","elan:staticIpSettings:secondaryDns"]);return{iface:t["elan:networkInterfaceName"]||"",ipMode:"true"===t["elan:dhcpIsEnabled"]?"dhcp":"manual",manual:{ip:t["elan:staticIpSettings:ipAddress"]||"",mask:t["elan:staticIpSettings:subnetMask"]||"",gateway:t["elan:staticIpSettings:gateway"]||"",dns1:t["elan:staticIpSettings:primaryDns"]||"",dns2:t["elan:staticIpSettings:secondaryDns"]||""}}}function useSettings(){let a=(0,t.tQ)("lan-settings",settingsFetcher);return{...a}}function makeRecord(a){let e={"elan:networkInterfaceName":a.iface||null,"elan:dhcpIsEnabled":"dhcp"===a.ipMode?"true":"false"};return"manual"===a.ipMode&&(e["elan:staticIpSettings:ipAddress"]=a.manual.ip,e["elan:staticIpSettings:subnetMask"]=a.manual.mask,e["elan:staticIpSettings:gateway"]=a.manual.gateway,e["elan:staticIpSettings:primaryDns"]=a.manual.dns1,e["elan:staticIpSettings:secondaryDns"]=a.manual.dns2),e}async function saveSettings(a){return(0,i.NC)(makeRecord(a))}let l={manual:{ip:(0,s.Sg)(a=>"manual"===a.elan.ipMode,s.Cl),mask:(0,s.Sg)(a=>"manual"===a.elan.ipMode,s.Cl),gateway:(0,s.Sg)(a=>"manual"===a.elan.ipMode,s.Cl),dns1:(0,s.Sg)(a=>"manual"===a.elan.ipMode,s.Cl),dns2:(0,s.Sg)(a=>"manual"===a.elan.ipMode,s.Cl)}}},281:function(a,e,n){n.d(e,{Ak:function(){return r},Rx:function(){return o},Up:function(){return makeRecord},rV:function(){return useSettings},zQ:function(){return saveSettings}});var t=n(6654),i=n(52),s=n(3738),l=n(6169);let r=Symbol("UnmodifiedPassword");async function settingsFetcher(a){let[e,n]=a,t=await (0,s.wv)(n,["wlan:networkInterfaceName","wlan:mode","wlan:country","wlan:apSettings:ssid","wlan:apSettings:password","wlan:stationSettings:ssid","wlan:stationSettings:password","wlan:stationSettings:dhcpIsEnabled","wlan:stationSettings:staticIpSettings:ipAddress","wlan:stationSettings:staticIpSettings:subnetMask","wlan:stationSettings:staticIpSettings:gateway","wlan:stationSettings:staticIpSettings:primaryDns","wlan:stationSettings:staticIpSettings:secondaryDns"]);return{iface:t["wlan:networkInterfaceName"]||"",country:t["wlan:country"]||"PL",mode:"ap"===t["wlan:mode"]?"ap":"client",ap:{ssid:t["wlan:apSettings:ssid"]||"",password:t["wlan:apSettings:password"]?r:null},client:{ssid:t["wlan:stationSettings:ssid"]||"",password:t["wlan:stationSettings:password"]?r:null,ipMode:"true"===t["wlan:stationSettings:dhcpIsEnabled"]?"dhcp":"manual",manual:{ip:t["wlan:stationSettings:staticIpSettings:ipAddress"]||"",mask:t["wlan:stationSettings:staticIpSettings:subnetMask"]||"",gateway:t["wlan:stationSettings:staticIpSettings:gateway"]||"",dns1:t["wlan:stationSettings:staticIpSettings:primaryDns"]||"",dns2:t["wlan:stationSettings:staticIpSettings:secondaryDns"]||""}}}}function useSettings(){let a=(0,i.tQ)("wifi-settings",settingsFetcher);return{...a}}function makeRecord(a){let e={"wlan:networkInterfaceName":a.iface||null,"wlan:mode":"client"===a.mode?"station":"ap","wlan:country":a.country};if("ap"===a.mode){if(e["wlan:apSettings:ssid"]=a.ap.ssid||null,a.ap.password!==r){let n=a.ap.password?"base64$".concat(btoa(a.ap.password)):null;e["wlan:apSettings:password"]=n}}else if("client"===a.mode){if(e["wlan:stationSettings:ssid"]=a.client.ssid||null,a.client.password!==r){let n=a.client.password?"base64$".concat(btoa(a.client.password)):null;e["wlan:stationSettings:password"]=n}e["wlan:stationSettings:dhcpIsEnabled"]="dhcp"===a.client.ipMode?"true":"false","manual"===a.client.ipMode&&(e["wlan:stationSettings:staticIpSettings:ipAddress"]=a.client.manual.ip,e["wlan:stationSettings:staticIpSettings:subnetMask"]=a.client.manual.mask,e["wlan:stationSettings:staticIpSettings:gateway"]=a.client.manual.gateway,e["wlan:stationSettings:staticIpSettings:primaryDns"]=a.client.manual.dns1,e["wlan:stationSettings:staticIpSettings:secondaryDns"]=a.client.manual.dns2)}return e}async function saveSettings(a){return(0,s.NC)(makeRecord(a))}let o={ap:{ssid:(0,l.Sg)(a=>"ap"===a.wlan.mode,(0,t.d)({max:32},"Max length is 32")),password:(a,e)=>{if("ap"===e.wlan.mode&&a&&a!==r)return(0,t.d)({min:8,max:63},"Password length should be between 8 and 63")(a)}},client:{ssid:(0,l.Sg)(a=>"client"===a.wlan.mode,(0,t.d)({max:32},"Max length is 32")),password:(a,e)=>{if("client"===e.wlan.mode&&a&&a!==r)return(0,t.d)({min:8,max:63},"Password length should be between 8 and 63")(a)},manual:{ip:(0,l.Sg)(a=>"client"===a.wlan.mode&&"manual"===a.wlan.client.ipMode,l.Cl),mask:(0,l.Sg)(a=>"client"===a.wlan.mode&&"manual"===a.wlan.client.ipMode,l.Cl),gateway:(0,l.Sg)(a=>"client"===a.wlan.mode&&"manual"===a.wlan.client.ipMode,l.Cl),dns1:(0,l.Sg)(a=>"client"===a.wlan.mode&&"manual"===a.wlan.client.ipMode,l.Cl),dns2:(0,l.Sg)(a=>"client"===a.wlan.mode&&"manual"===a.wlan.client.ipMode,l.Cl)}}}},6169:function(a,e,n){function checkIp(a){return a?a.toString().match(i)?void 0:"Invalid IP address.":"Required."}function checkPhone(a){return a?a.toString().match(/^\+?[*#0-9]+$/)?void 0:"Invalid phone number.":"Required."}function checkIf(a,e){return(n,t)=>a(t)?e(n):void 0}n.d(e,{C6:function(){return t},Cl:function(){return checkIp},Sg:function(){return checkIf},aH:function(){return checkPhone}});let t=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,i=/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/}}]);