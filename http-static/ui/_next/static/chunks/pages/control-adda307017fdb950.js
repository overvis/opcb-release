(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{7247:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/control",function(){return i(7194)}])},9578:function(e,t,i){"use strict";var n=i(2104);t.Z=(0,n.k)(e=>({dirtyInput:{backgroundColor:e.colors.blue[0]}}))},8581:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var n=i(6521),s=i(5721),a=i(594),o=i(7961),r=i(5388),l=i(1876),c=i(6386),d=i(8202),u=i(9011),h=i(5570),p=i(1771);function x(e){let t="connected"===e.status?"green":"warn"===e.status?"orange":"disconnected"===e.status?"red":"gray";return(0,n.jsx)(o.X,{h:"100%",withBorder:!0,children:(0,n.jsxs)(r.K,{spacing:0,h:"100%",children:[(0,n.jsxs)(l.Z,{position:"apart",align:"center",p:"xs",sx:e=>({borderBottom:"1px solid ".concat(e.colors.gray[3])}),children:[(0,n.jsxs)(l.Z,{spacing:"xs",noWrap:!0,children:[(0,n.jsx)(c.k,{color:t,variant:"light",children:e.icon}),(0,n.jsx)(d.x,{weight:500,c:t,transform:"uppercase",children:e.name}),e.addEl&&"string"==typeof e.addEl?(0,n.jsx)(d.x,{c:"dimmed",size:"sm",children:e.addEl}):e.addEl]}),(0,n.jsxs)(l.Z,{spacing:"xs",noWrap:!0,children:[e.addElRight,e.settingsAction&&(0,n.jsx)(u.A,{color:"blue",onClick:e.settingsAction,children:(0,n.jsx)(p.Z,{size:18})})]})]}),(0,n.jsx)(h.x,{bg:e.bg,h:"100%",children:e.children})]})})}function g(e){let[t,i]=(0,s.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Z,{...e.settings,opened:t,setOpened:i}),(0,n.jsx)(x,{...e,settingsAction:()=>i(!0),children:e.children})]})}},3611:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(6521),s=i(5400),a=i(5388),o=i(8202),r=i(1876),l=i(5885),c=i(5721);function d(e){let{children:t,title:i,description:d,buttonText:u}=e,[h,p]=(0,c.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.u,{opened:h,onClose:()=>p(!1),withCloseButton:!1,children:(0,n.jsxs)(a.K,{children:[(0,n.jsx)(o.x,{fz:"md",weight:500,align:"center",children:i}),(0,n.jsx)(o.x,{fz:"sm",c:"gray.7",align:"center",children:d}),(0,n.jsxs)(r.Z,{position:"center",children:[(0,n.jsx)(l.z,{color:"orange",onClick:()=>{t.props.onClick(),p(!1)},children:u}),(0,n.jsx)(l.z,{color:"green",onClick:()=>p(!1),children:"Cancel"})]})]})}),(0,n.jsx)(t.type,{...t.props,onClick:()=>p(!0)})]})}},7176:function(e,t,i){"use strict";i.d(t,{M:function(){return r},u:function(){return l}});var n=i(6521),s=i(367),a=i(602),o=i(4239);async function r(e){(0,s.yK)("settings-save"),(0,s.c0)({id:"settings-save",withCloseButton:!0,autoClose:!1,loading:!0,icon:null,color:"orange",title:"Saving settings...",message:"Please wait while the new settings are applied..."});try{await e()}catch(e){(0,s.wD)({id:"settings-save",loading:!1,withCloseButton:!0,color:"red",icon:(0,n.jsx)(a.Z,{}),title:"Error saving settings",message:"There was an error saving settings. Please check form data and try again."}),console.error(e);return}(0,s.wD)({id:"settings-save",loading:!1,withCloseButton:!0,autoClose:1e3,color:"green",icon:(0,n.jsx)(o.Z,{}),title:"Settings saved",message:"Settings were saved and applied successfully."})}function l(e,t,i){return function(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input";return function(e,t,i,n){let s=e.getInputProps(t,i);return{...s,classNames:{input:e.isDirty(t)&&n||void 0}}}(e,n,{...i,type:s},t)}}},3930:function(e,t,i){"use strict";i.d(t,{Y:function(){return o}});var n=i(5721),s=i(681),a=i(218);function o(e,t,i){let o=window.location.hostname,r=window.location.port,l="ws://".concat(o,":").concat(r).concat(e),[c,d]=(0,n.useState)([]),{lastMessage:u,readyState:h}=(0,s.ZP)(l,{onError:e=>console.error("Log socket closed with error: ".concat(e)),onClose:e=>{console.log("Log socket closed: "+e),d(e=>e.concat({id:Math.floor(1e9*Math.random()),raw:"Log socket interrupted.",date:(0,a.k6)(new Date),type:"close"}))},onOpen:()=>{d(e=>e.concat({id:Math.floor(1e9*Math.random()),raw:"Log socket opened.",date:(0,a.k6)(new Date),type:"open"}))},shouldReconnect:()=>!0,reconnectAttempts:5,reconnectInterval:1e3});return(0,n.useEffect)(()=>{null===u||i||d(e=>{let i=t?t(u.data):u.data;return e.find(e=>e.id===i.id)?e:e.concat(i).slice(-1e3)})},[u,d]),{messageHistory:c,setMessageHistory:d,socketReadyState:h}}},7194:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return em}});var n,s,a=i(6521),o=i(5570),r=i(9136),l=i(5388),c=i(7961),d=i(1876),u=i(8202),h=i(5885),p=i(9793),x=i(2967),g=i(447),m=i(8519),f=i(8026),j=i(6686),v=i(3790),b=i(5721);function w(e){let{children:t,title:i}=e,[n,s]=(0,b.useState)(!1);return(0,a.jsx)(c.X,{withBorder:!0,p:"md",children:(0,a.jsxs)(l.K,{children:[(0,a.jsxs)(d.Z,{spacing:"xs",onClick:()=>s(!n),sx:e=>({cursor:"pointer",color:e.colors.blue[6]}),children:[n?(0,a.jsx)(j.Z,{size:14}):(0,a.jsx)(v.Z,{size:14}),(0,a.jsx)(u.x,{size:"sm",transform:"uppercase",weight:700,color:"blue",children:i})]}),(0,a.jsx)(f.U,{in:n,children:(0,a.jsx)(d.Z,{mih:100,children:n&&t})})]})})}var y=i(2076),T=i(3930);function C(e){let{urlPath:t}=e,{messageHistory:i}=(0,T.Y)(t,e=>(function(e){let[t,...i]=e.split(" "),[n,s]=t.split("-"),a=1e3*Number(n)+Number(s);return{id:a,data:i.join(" ")}})(e)),n=(0,b.createRef)(),s=i.map(e=>(0,a.jsx)(Z,{record:e},e.id));return(0,a.jsx)(y.x,{style:{height:"550px"},ref:n,children:(0,a.jsx)(u.x,{fz:12,ff:"monospace",children:s})})}let Z=(0,b.memo)(function(e){let{record:t}=e,i="data"in t?t.data:t.raw;return(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:'<div class="no-wrap">'.concat(i,"</div>")}})},(e,t)=>e.record.id===t.record.id);var R=i(9296),P=i(641),z=i(5400),k=i(515),M=i(4670),A=i(1197),U=i(3738),S=i(6518),O=i(4821),B=i(2344),D=i(4239),I=i(6993),F=i(4211),K=i(578),_=i(4579),E=i(4911);async function N(e){let[t,i]=e,n=await (0,E.wv)(i,["global:updateMode","global:autoUpdateTimeRange:from","global:autoUpdateTimeRange:till"]);return{mode:n["global:updateMode"],autoUpdateTimeRange:{from:n["global:autoUpdateTimeRange:from"],till:n["global:autoUpdateTimeRange:till"]}}}function W(){let e=(0,_.tQ)("update-settings",N);return{...e}}async function L(e){let t={"global:updateMode":e.mode,"global:autoUpdateTimeRange:from":"".concat(e.autoUpdateTimeRange.from),"global:autoUpdateTimeRange:till":"".concat(e.autoUpdateTimeRange.till)};return(0,E.NC)(t)}async function H(e){let t=(0,_.bH)();await (0,_.ri)(t,"/api/run-upgrade/",{method:"POST",body:JSON.stringify({ref:e})})}var X=i(8781),G=i(8986),J=i(8581),Y=i(4584),$=i(7992),q=i(3126),V=i(1685),Q=i(7176),ee=i(9578);function et(e){let{initialValues:t,onSubmit:i,saving:n}=e,s=(0,q.c)({initialValues:t,validate:{}}),{classes:o}=(0,ee.Z)(),r=(0,Q.u)(s,o.dirtyInput);return(0,a.jsx)("form",{onSubmit:s.onSubmit(async e=>{let t=await i(e);t&&s.resetDirty()}),children:(0,a.jsxs)(l.K,{children:[(0,a.jsxs)(l.K,{spacing:5,children:[(0,a.jsx)(Y.Ph,{withinPortal:!0,label:"Update mode:",data:[{label:"Disable updates completely",value:"disabled"},{label:"Manual updates",value:"manual"},{label:"Automatically apply patch updates",value:"auto-only-patch"},{label:"Automatically apply minor updates",value:"auto-only-minor"},{label:"Automatically apply all updates",value:"auto-all"}],...r("mode")}),"disabled"===s.values.mode&&(0,a.jsx)(u.x,{fz:"xs",c:"orange",children:"In this mode OPCB will not check for any available updates. You may miss security fixes. We recommend to set this setting to “Manual updates” instead."}),"auto-all"===s.values.mode&&(0,a.jsx)(u.x,{fz:"xs",c:"orange",children:"It is not recommended to use this setting, because major updates should be installed with user supervision. Use “Automatically apply minor updates” instead, you will be able to install major updates on this page."})]}),"disabled"!==s.values.mode&&"manual"!==s.values.mode&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.x,{fz:"sm",mt:"xs",fw:"bold",children:"Auto-update time period:"}),(0,a.jsx)($.M,{label:"From:",...r("autoUpdateTimeRange.from")}),(0,a.jsx)($.M,{label:"Till:",...r("autoUpdateTimeRange.till")})]}),(0,a.jsx)(V.Z,{type:"submit",inProgress:n,children:"Save"})]})})}var ei=i(3611);function en(e){let{}=e,t=W(),i=(0,G.$z)(),n=(0,X.A)();if(!t.data||!i.data)return(0,a.jsx)(d.Z,{position:"center",m:"lg",children:(0,a.jsx)(P.a,{})});let s=t.data,r=i.data;return(0,a.jsx)(J.Z,{name:"Firmware version and updates",icon:"disabled"===r.state||"no-repo"===r.state?(0,a.jsx)(A.Z,{}):(0,a.jsx)(U.Z,{}),status:"disabled"===r.state||"no-repo"===r.state?"disabled":"broken-repo"===r.state||"dirty-repo"===r.state?"warn":"connected",settings:{title:"Firmware update settings",form:et,useSettings:()=>({data:{...s,formMode:"update"},error:void 0,isValidating:!1,isLoading:!1,mutate:async()=>void 0}),save:L,onSettingsUpdate:async()=>{await t.mutate(),await i.mutate(),await n.mutate()}},children:(0,a.jsxs)(l.K,{align:"center",spacing:0,children:[(0,a.jsx)(o.x,{p:"xl",children:(0,a.jsx)(es,{info:r.current})}),(0,a.jsx)(d.Z,{w:"100%",p:"xl",sx:e=>({backgroundColor:e.colors.gray[0],borderTop:"1px solid ".concat(e.colors.gray[3])}),position:"center",children:(0,a.jsxs)(l.K,{align:"center",children:[(0,a.jsx)(eo,{status:r,settings:s}),r.lastUpgradeFailure&&(0,a.jsxs)(l.K,{c:"red",children:[(0,a.jsx)(u.x,{fz:"md",fw:"bold",children:(0,a.jsxs)("div",{children:["There was an error during the last upgrade attempt to version"," ",r.lastUpgradeFailure.ref,":"]})}),(0,a.jsx)(u.x,{fz:"xs",children:(0,a.jsx)("pre",{children:r.lastUpgradeFailure.error})})]})]})})]})})}function es(e){let{info:t}=e,[i,n]=(0,b.useState)("");return(0,b.useEffect)(()=>{(0,G.Ab)().then(e=>{n(e)}).catch(console.error)},[]),(0,a.jsxs)(l.K,{spacing:"xs",fz:"sm",align:"center",children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsxs)(u.x,{fz:"md",children:["Current firmware version: ",(0,a.jsx)("b",{children:t.version})]}),(0,a.jsx)(ea,{version:t.version,markdownContent:i,children:"Release information"})]}),(0,a.jsxs)(d.Z,{c:"grey",children:[(0,a.jsxs)(u.x,{children:["Released on: ",(0,a.jsx)("b",{children:t.date})]}),(0,a.jsxs)(u.x,{children:["GIT tag: ",(0,a.jsx)("b",{children:t.tag})]}),(0,a.jsxs)(u.x,{children:["SHA: ",(0,a.jsx)("b",{children:t.sha})]})]})]})}function ea(e){let{children:t,version:i,markdownContent:n}=e,[s,o]=(0,b.useState)(!1),r=K.TU.parse(n,{mangle:!1,headerIds:!1});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.u,{opened:s,onClose:()=>o(!1),title:"Release information for version ".concat(i),size:"xl",children:(0,a.jsx)(k.l,{children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})})}),(0,a.jsxs)(M.e,{fz:"sm",onClick:()=>o(!0),children:[(0,a.jsx)(S.Z,{size:14,style:{position:"relative",top:"2px"}})," ",t]})]})}function eo(e){let{status:t,settings:i}=e;return"disabled"===t.state?(0,a.jsx)(er,{}):"broken-repo"===t.state?(0,a.jsx)(el,{}):"dirty-repo"===t.state?(0,a.jsx)(ec,{}):"no-repo"===t.state?(0,a.jsx)(ed,{}):"no-update"===t.state?(0,a.jsx)(eu,{}):t.scheduledUpgradeToTag?(0,a.jsx)(eh,{status:t,settings:i}):(0,a.jsx)(ex,{status:t})}function er(){return(0,a.jsxs)(d.Z,{c:"grey",spacing:5,children:[(0,a.jsx)(O.Z,{size:18}),(0,a.jsx)(u.x,{children:"Updates are disabled by user settings."})]})}function el(){return(0,a.jsxs)(l.K,{spacing:2,align:"center",children:[(0,a.jsxs)(d.Z,{c:"red",spacing:5,children:[(0,a.jsx)(B.Z,{size:22}),(0,a.jsx)(u.x,{children:"GIT repository is broken. Updates are disabled."})]}),(0,a.jsxs)(u.x,{fz:"sm",color:"grey",children:["Please contact support for help:"," ",(0,a.jsx)(M.e,{href:"mailto:support@overvis.com",children:"support@overvis.com"})]})]})}function ec(){return(0,a.jsxs)(l.K,{spacing:2,align:"center",children:[(0,a.jsxs)(d.Z,{c:"orange",spacing:5,children:[(0,a.jsx)(B.Z,{size:22}),(0,a.jsx)(u.x,{children:"GIT repository contains local modifications. Updates are disabled."})]}),(0,a.jsxs)(u.x,{fz:"sm",color:"grey",children:["Please contact support for help:"," ",(0,a.jsx)(M.e,{href:"mailto:support@overvis.com",children:"support@overvis.com"})]})]})}function ed(){return(0,a.jsxs)(l.K,{c:"grey",spacing:2,align:"center",children:[(0,a.jsxs)(d.Z,{spacing:5,children:[(0,a.jsx)(O.Z,{size:18}),(0,a.jsx)(u.x,{children:"OPCB runtime was not checked out from GIT repository. Updates are disabled."})]}),(0,a.jsxs)(u.x,{fz:"sm",children:["Please contact support if you need to enable updates:"," ",(0,a.jsx)(M.e,{href:"mailto:support@overvis.com",children:"support@overvis.com"})]})]})}function eu(){let[e,t]=(0,b.useState)(!1),i=(0,G.$z)(),n=(0,X.A)();return(0,a.jsxs)(d.Z,{children:[(0,a.jsxs)(d.Z,{c:"green",spacing:8,children:[(0,a.jsx)(D.Z,{size:22}),(0,a.jsx)(u.x,{children:"Your version is up to date."})]}),(0,a.jsx)(h.z,{variant:"subtle",leftIcon:(0,a.jsx)(I.Z,{size:"16px"}),loading:e,onClick:async()=>{t(!0),await (0,G.Df)(),await i.mutate(),await n.mutate(),t(!1)},children:"Refresh"})]})}function eh(e){var t,i,n,s,o,r,c,p,x;let g;let{status:m,settings:f}=e,j=m.scheduledUpgradeToTag,v=j,w=j,y=!1;(null===(t=m.latestPatch)||void 0===t?void 0:t.tag)===w&&(v=null===(s=m.latestPatch)||void 0===s?void 0:s.version,w="".concat(v||w," (patch or security fix)"),g=null===(o=m.latestPatch)||void 0===o?void 0:o.changelogMarkdown),(null===(i=m.latestMinor)||void 0===i?void 0:i.tag)===w&&(v=null===(r=m.latestMinor)||void 0===r?void 0:r.version,w="".concat(v||w," (minor update)"),g=null===(c=m.latestMinor)||void 0===c?void 0:c.changelogMarkdown),(null===(n=m.latestMajor)||void 0===n?void 0:n.tag)===w&&(v=null===(p=m.latestMajor)||void 0===p?void 0:p.version,w="".concat(v||w," (major update)"),g=null===(x=m.latestMajor)||void 0===x?void 0:x.changelogMarkdown,y=!0),w||(w="unknown");let[T,C]=(0,b.useState)(!1),Z=(0,G.$z)(),R=W(),P=(0,X.A)();return(0,a.jsxs)(l.K,{c:"grey",spacing:2,align:"center",children:[(0,a.jsxs)(d.Z,{spacing:"sm",children:[(0,a.jsxs)(d.Z,{c:y?"orange":"green",spacing:5,children:[(0,a.jsx)(F.Z,{size:18}),(0,a.jsxs)(u.x,{children:["Scheduled update: ",(0,a.jsx)("b",{children:w})]})]}),g&&(0,a.jsx)(ea,{version:v||w,markdownContent:g,children:"List of changes"})]}),(0,a.jsxs)(u.x,{fz:"sm",children:["Update will be applied between ",f.autoUpdateTimeRange.from," and"," ",f.autoUpdateTimeRange.till,"."]}),j&&(0,a.jsxs)(d.Z,{pt:"sm",children:[(0,a.jsx)(ep,{tag:j}),(0,a.jsx)(ei.Z,{title:"Cancel the update and disable auto-updates",description:"This action will cancel the current update and switch OPCB to manual update mode.",buttonText:"Disable auto-updates",children:(0,a.jsx)(h.z,{variant:"subtle",loading:T,onClick:async()=>{C(!0),await (0,G.hH)(),await Z.mutate(),await R.mutate(),await P.mutate(),C(!1)},children:"Cancel and disable"})})]})]})}function ep(e){let{tag:t}=e,{actionHandler:i}=(0,m.vu)();return(0,a.jsx)(ei.Z,{title:"Update to version ".concat(t),description:"This action will preform the upgrade of the OPCB runtime to a new version right now. Device will be switched offline for about a minute.",buttonText:"Update now",children:(0,a.jsx)(h.z,{onClick:()=>i({actionProcess:async()=>{H(t)},afterAction:async()=>{let e=await (0,G.s_)();if(e.lastFailedUpgradeRef)throw Error("Failed to upgrade to version ".concat(e.lastFailedUpgradeRef))},title:"Updating firmware",failedTitle:"Firmware update failed",failedId:"firmware-update-failed",startActionText:"Waiting for update to start...",afterActionText:"Update started. Please wait...",successId:"firmware-update-success",successTitle:"Successful update",successMessage:"OPCB firmware updated to the latest version.",redirectToDashboardAfterAction:!0,delayBeforeDeviceWait:1e4}),children:"Update now"})})}function ex(e){var t,i,n,s,o,r,c,h,p;let x,g,m,f;let{status:j}=e;return("available-update-patch"===j.state&&(g=null===(t=j.latestPatch)||void 0===t?void 0:t.version,f=null===(i=j.latestPatch)||void 0===i?void 0:i.tag,x="".concat(g," (patch or security fix)"),m=null===(n=j.latestPatch)||void 0===n?void 0:n.changelogMarkdown),"available-update-minor"===j.state&&(g=null===(s=j.latestMinor)||void 0===s?void 0:s.version,f=null===(o=j.latestMinor)||void 0===o?void 0:o.tag,x="".concat(g," (minor update)"),m=null===(r=j.latestMinor)||void 0===r?void 0:r.changelogMarkdown),"available-update-major"===j.state&&(g=null===(c=j.latestMajor)||void 0===c?void 0:c.version,f=null===(h=j.latestMajor)||void 0===h?void 0:h.tag,x="".concat(g," (major update)"),m=null===(p=j.latestMajor)||void 0===p?void 0:p.changelogMarkdown),g&&f)?(0,a.jsxs)(l.K,{c:"grey",spacing:2,align:"center",children:[(0,a.jsxs)(d.Z,{spacing:"sm",children:[(0,a.jsxs)(d.Z,{c:"green",spacing:5,children:[(0,a.jsx)(F.Z,{size:18}),(0,a.jsxs)(u.x,{children:["New version is available: ",(0,a.jsx)("b",{children:x})]})]}),m&&(0,a.jsx)(ea,{version:g,markdownContent:m,children:"List of changes"})]}),(0,a.jsx)(d.Z,{pt:"sm",children:(0,a.jsx)(ep,{tag:f})})]}):(0,a.jsx)(eu,{})}async function eg(e){let t;let i=(0,_.bH)();if(e===s.RestartRuntime?t=await (0,_.ri)(i,"/api/restart/",{method:"POST",body:JSON.stringify({})}):e===s.RebootDevice?t=await (0,_.ri)(i,"/api/reboot/",{method:"POST",body:JSON.stringify({})}):e===s.ResetConfiguration&&(t=await (0,_.ri)(i,"/api/confs/reset/",{method:"POST",body:JSON.stringify({})})),(null==t?void 0:t.status)!==200)throw Error("request failed with status "+(null==t?void 0:t.status))}function em(){return(0,a.jsx)(R.Z,{pageTitle:"Control",children:(0,a.jsx)(ef,{})})}function ef(){var e;let{actionHandler:t}=(0,m.vu)(),i=(0,_.pk)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.x,{pb:"md",children:(0,a.jsx)(en,{})}),(0,a.jsxs)(r.M,{cols:3,children:[(0,a.jsx)(ej,{title:"Restart OPCB Runtime",icon:(0,a.jsx)(p.Z,{size:16}),description:"Restart OPCB runtime, reloading the configuration files and all services. The connection to the device will be lost temporarily after this action.",buttonText:"Restart runtime",confirmText:"Confirm restarting OPCB runtime.",confirmDescription:"The connection to the device will be lost temporarily.",action:()=>{t({actionProcess:async()=>{eg(s.RestartRuntime)},title:"Restarting OPCB runtime",failedTitle:"Restart failed.",failedId:"restart-failed",startActionText:"Sending the command to the device...",afterActionText:"Command received by the device...",successId:"restart-success",successTitle:"OPCB runtime has been restarted.",successMessage:"Operation completed successfully.",redirectToDashboardAfterAction:!0,delayBeforeDeviceWait:5e3})}}),(0,a.jsx)(ej,{title:"Reboot the device",icon:(0,a.jsx)(x.Z,{size:16}),description:"Soft-reboot of the device operating system. The connection to the device will be lost for a minute or more after this action.",buttonText:"Reboot device",confirmText:"Confirm rebooting OPCB device.",confirmDescription:"The connection to the device will be lost temporarily.",action:()=>{t({actionProcess:async()=>{eg(s.RebootDevice)},title:"Rebooting OPCB",failedTitle:"Reboot failed.",failedId:"reboot-failed",startActionText:"Sending the command to the device...",afterActionText:"Command received by the device...",successId:"reboot-success",successTitle:"Device has been rebooted.",successMessage:"Operation completed successfully.",redirectToDashboardAfterAction:!0,delayBeforeDeviceWait:5e3})}}),(0,a.jsx)(ej,{title:"Reset to the default configuration",icon:(0,a.jsx)(g.Z,{size:16}),description:"OPCB runtime configuration will be restored to the factory values after this action. As a consequence, the connection to the device may be lost. OPCB Wi-Fi will be automatically switched to the Access Point mode.",buttonText:"Reset configuration",confirmText:"Confirm resetting OPCB configuration to the factory values.",confirmDescription:"The connection to the device will be lost. To access the device, connect to OPCB Wi-Fi Access Point after this action.",action:()=>{t({actionProcess:async()=>{eg(s.ResetConfiguration)},title:"Reseting OPCB configuration",failedTitle:"Reset failed.",failedId:"reset-failed",startActionText:"Sending the command to the device...",afterActionText:"Command received by the device...",successId:"reset-success",successTitle:"OPCB configuration has been reset.",successMessage:"Operation completed successfully.",messageAfterDeviceWaitTimeout:(0,a.jsx)(m.zU,{}),redirectToDashboardAfterAction:!0,delayBeforeDeviceWait:5e3})}})]}),(null===(e=i.token)||void 0===e?void 0:e.username)==="admin"&&(0,a.jsx)(l.K,{mt:"md",spacing:"md",children:(0,a.jsx)(w,{title:"Control bus stream log",children:(0,a.jsx)(C,{urlPath:"/api/log/bus/"})})})]})}function ej(e){let{title:t,icon:i,description:n,buttonText:s,confirmText:r,confirmDescription:p,action:x}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c.X,{bg:"gray.0",withBorder:!0,children:(0,a.jsxs)(l.K,{h:"100%",spacing:0,children:[(0,a.jsxs)(d.Z,{px:"md",py:"sm",sx:e=>({borderBottom:"1px solid ".concat(e.colors.gray[3])}),spacing:"xs",children:[i,(0,a.jsx)(u.x,{weight:500,children:t})]}),(0,a.jsx)(o.x,{h:"100%",p:"md",children:(0,a.jsxs)(l.K,{h:"100%",justify:"space-between",spacing:"sm",children:[(0,a.jsx)(u.x,{fz:"xs",children:n}),(0,a.jsx)(ei.Z,{title:r,description:p,buttonText:s,children:(0,a.jsx)(h.z,{color:"orange",onClick:x,children:s})})]})})]})})})}(n=s||(s={}))[n.RestartRuntime=0]="RestartRuntime",n[n.RebootDevice=1]="RebootDevice",n[n.ResetConfiguration=2]="ResetConfiguration"}},function(e){e.O(0,[634,558,210,521,296,774,888,179],function(){return e(e.s=7247)}),_N_E=e.O()}]);