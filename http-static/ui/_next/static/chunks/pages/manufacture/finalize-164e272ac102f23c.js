(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{3765:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var i=(0,n(2516).Z)("edit-circle","IconEditCircle",[["path",{d:"M12 15l8.385 -8.415a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3z",key:"svg-0"}],["path",{d:"M16 5l3 3",key:"svg-1"}],["path",{d:"M9 7.07a7 7 0 0 0 1 13.93a7 7 0 0 0 6.929 -6",key:"svg-2"}]])},8236:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var i=(0,n(2516).Z)("hammer","IconHammer",[["path",{d:"M11.414 10l-7.383 7.418a2.091 2.091 0 0 0 0 2.967a2.11 2.11 0 0 0 2.976 0l7.407 -7.385",key:"svg-0"}],["path",{d:"M18.121 15.293l2.586 -2.586a1 1 0 0 0 0 -1.414l-7.586 -7.586a1 1 0 0 0 -1.414 0l-2.586 2.586a1 1 0 0 0 0 1.414l7.586 7.586a1 1 0 0 0 1.414 0z",key:"svg-1"}]])},2996:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var i=(0,n(2516).Z)("signature","IconSignature",[["path",{d:"M3 17c3.333 -3.333 5 -6 5 -8c0 -3 -1 -3 -2 -3s-2.032 1.085 -2 3c.034 2.048 1.658 4.877 2.5 6c1.5 2 2.5 2.5 3.5 1l2 -3c.333 2.667 1.333 4 3 4c.53 0 2.639 -2 3 -2c.517 0 1.517 .667 3 2",key:"svg-0"}]])},1863:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var i=(0,n(2516).Z)("test-pipe","IconTestPipe",[["path",{d:"M20 8.04l-12.122 12.124a2.857 2.857 0 1 1 -4.041 -4.04l12.122 -12.124",key:"svg-0"}],["path",{d:"M7 13h8",key:"svg-1"}],["path",{d:"M19 15l1.5 1.6a2 2 0 1 1 -3 0l1.5 -1.6z",key:"svg-2"}],["path",{d:"M15 3l6 6",key:"svg-3"}]])},1331:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manufacture/finalize",function(){return n(2226)}])},8435:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(6521),r=n(3497),s=n(8481),a=n(6007),c=n(4432),o=n(8236),l=n(3765),u=n(1863),d=n(2996),h=n(7280),f=n(9266);let g=(0,r.k)(e=>({tabsList:{borderBottom:"1px solid ".concat(e.colors.gray[4])},tab:{color:e.colors.blue[6],textTransform:"uppercase",fontSize:e.fontSizes.xs,"&:hover":{backgroundColor:"transparent",border:"transparent",color:e.colors.dark},"&[data-active]":{borderBottom:"2px solid #000",pointerEvents:"none"}}}));function x(e){let{children:t,title:n,id:r,wireguardConnected:x,internetConnected:m}=e,{classes:p}=g(),v=(0,h.useRouter)();return(0,i.jsxs)(f.Z,{pageTitle:"Manufacture :: ".concat(n),children:[("restore"===r||"register"===r)&&(0,i.jsxs)(i.Fragment,{children:[x&&(0,i.jsx)(s.b,{my:"lg",icon:(0,i.jsx)(c.Z,{}),title:"Already authenticated.",color:"yellow",children:"This device is already authenticated on the remote server and has an access. By submitting this form you may lose the access or change the device's identity."}),!m&&(0,i.jsx)(s.b,{my:"lg",icon:(0,i.jsx)(c.Z,{}),title:"No internet access.",color:"yellow",children:"Active internet connection is required to restore the device's identity. Please check the device's settings."})]}),(0,i.jsxs)(a.m,{color:"dark",value:r,variant:"default",classNames:{tabsList:p.tabsList,tab:p.tab},onTabChange:e=>v.push("/manufacture/".concat(e)),children:[(0,i.jsxs)(a.m.List,{mb:"lg",children:[(0,i.jsx)(a.m.Tab,{value:"restore",icon:(0,i.jsx)(o.Z,{size:16}),children:"Restore identity"}),(0,i.jsx)(a.m.Tab,{value:"register",icon:(0,i.jsx)(l.Z,{size:16}),children:"Register"}),(0,i.jsx)(a.m.Tab,{value:"test",icon:(0,i.jsx)(u.Z,{size:16}),children:"Test"}),(0,i.jsx)(a.m.Tab,{value:"finalize",icon:(0,i.jsx)(d.Z,{size:16}),children:"Finalize"})]}),(0,i.jsx)(a.m.Panel,{value:r,children:t})]})]})}},124:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(6521),r=n(139),s=n(9626),a=n(3685),c=n(2715),o=n(9400),l=n(5721);function u(e){let{children:t,title:n,description:u,buttonText:d}=e,[h,f]=(0,l.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.u,{opened:h,onClose:()=>f(!1),withCloseButton:!1,children:(0,i.jsxs)(s.K,{children:[(0,i.jsx)(a.x,{fz:"md",weight:500,align:"center",children:n}),(0,i.jsx)(a.x,{fz:"sm",c:"gray.7",align:"center",children:u}),(0,i.jsxs)(c.Z,{position:"center",children:[(0,i.jsx)(o.z,{color:"orange",onClick:()=>{t.props.onClick(),f(!1)},children:d}),(0,i.jsx)(o.z,{color:"green",onClick:()=>f(!1),children:"Cancel"})]})]})}),(0,i.jsx)(t.type,{...t.props,onClick:()=>f(!0)})]})}},2226:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var i=n(6521),r=n(9626),s=n(3685),a=n(2715),c=n(9400),o=n(4091),l=n(8435),u=n(124),d=n(4893);function h(){return(0,i.jsx)(l.Z,{id:"finalize",title:"Finalize manufacturing",children:(0,i.jsx)(f,{})})}function f(){let{actionHandler:e}=(0,o.vu)(),t=async()=>{let e=(0,d.bH)(),t=await (0,d.ri)(e,"/api/manufacture/finalize/",{method:"POST",body:JSON.stringify({})});if((null==t?void 0:t.status)!==200)throw Error("request failed with status "+(null==t?void 0:t.status))};return(0,i.jsxs)(r.K,{h:"100%",children:[(0,i.jsx)(s.x,{fz:"xs",c:"gray",children:"The following action will finalize the manufacturing process and will restore the interface to default user-mode. To restore the manufacturer's interface, put empty MANUFACTURER_LICENSE file in the root directory of device's SD card."}),(0,i.jsx)(a.Z,{children:(0,i.jsx)(u.Z,{title:"Finalize manufacturing",description:"Are you sure you want to finalize manufacturing?",buttonText:"Finalize",children:(0,i.jsx)(c.z,{color:"orange",onClick:()=>{e({actionProcess:t,title:"Finalize manufacturing",failedTitle:"Finalize failed.",failedId:"finalize-failed",startActionText:"Sending the command to the device...",afterActionText:"Finalizing the manufacturing process...",successId:"finalize-success",successTitle:"Manufacturing process has been finalized.",successMessage:"Operation completed successfully..",redirectToDashboardAfterAction:!0,delayBeforeDeviceWait:5e3})},children:"Finalize manufacturing"})})})]})}}},function(e){e.O(0,[473,13,7,266,774,888,179],function(){return e(e.s=1331)}),_N_E=e.O()}]);