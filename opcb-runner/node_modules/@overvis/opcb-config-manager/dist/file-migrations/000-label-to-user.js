"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.up = exports.name = void 0;
const tslib_1 = require("tslib");
const path = tslib_1.__importStar(require("path"));
const __1 = require("..");
const fs = tslib_1.__importStar(require("fs/promises"));
exports.name = path.basename(__filename);
async function up(_config) {
    const OLD_LABEL_FILE_PATH = "/opcb/http-static/ui/media/opcb-label.png";
    const NEW_LABEL_FILE_PATH = "/opcb/user/label.png";
    // if label file exists in media ui and new file doesn't exist, copy label to the new location
    try {
        await fs.access(NEW_LABEL_FILE_PATH);
        __1.logger.warn(`"${NEW_LABEL_FILE_PATH}" already exists, not copying "${OLD_LABEL_FILE_PATH}"`);
    }
    catch (e) {
        // new file doesn't exist
        if (e.code === "ENOENT") {
            try {
                await fs.copyFile(OLD_LABEL_FILE_PATH, NEW_LABEL_FILE_PATH);
            }
            catch (e) {
                __1.logger.warn(`Could not copy "${OLD_LABEL_FILE_PATH}" to "${NEW_LABEL_FILE_PATH}", ignoring... Label may need to be re-rendered manually.`);
            }
        }
        __1.logger.warn(`Copied "${OLD_LABEL_FILE_PATH}" to "${NEW_LABEL_FILE_PATH}"`);
    }
}
exports.up = up;
//# sourceMappingURL=000-label-to-user.js.map