"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.readManufacturerLicenseFile = void 0;
const tslib_1 = require("tslib");
const dotenv_1 = tslib_1.__importDefault(require("dotenv"));
const fs = tslib_1.__importStar(require("fs"));
async function readManufacturerLicenseFile(manufacturerFile) {
    const manufacturer = {
        modeEnabled: false,
    };
    if ("path" in manufacturerFile) {
        if (fs.existsSync(manufacturerFile.path)) {
            manufacturer.modeEnabled = true;
            const env = dotenv_1.default.parse(await fs.promises.readFile(manufacturerFile.path, "utf8"));
            manufacturer.licenseUuid = env.LICENSE_ID;
            manufacturer.licensePassword = env.LICENSE_PASSWORD;
            manufacturer.batchDescription = env.BATCH_DESCRIPTION;
        }
    }
    else {
        if (manufacturerFile.contents) {
            manufacturer.modeEnabled = true;
            const env = dotenv_1.default.parse(manufacturerFile.contents);
            manufacturer.licenseUuid = env.LICENSE_ID;
            manufacturer.licensePassword = env.LICENSE_PASSWORD;
            manufacturer.batchDescription = env.BATCH_DESCRIPTION;
        }
    }
    return manufacturer;
}
exports.readManufacturerLicenseFile = readManufacturerLicenseFile;
//# sourceMappingURL=manufacturer.js.map