"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createSetTimeHandler = void 0;
const opcb_ts_shared_1 = require("@overvis/opcb-ts-shared");
const __1 = require("..");
const exec_1 = require("../exec");
function createSetTimeHandler(bgworker) {
    return async (cmd) => {
        __1.logger.debug("Got set time command.");
        await (0, exec_1.exec)("timedatectl", ["set-time", cmd.time]);
        await (0, exec_1.exec)("hwclock", ["-w"]);
        await bgworker.run(true);
        return new opcb_ts_shared_1.redisCmd.Done();
    };
}
exports.createSetTimeHandler = createSetTimeHandler;
//# sourceMappingURL=set-time.js.map