{
    "additionalProperties": false,
    "type": "object",
    "properties": {
        "global": {
            "description": "Global configuration.",
            "additionalProperties": false,
            "default": {},
            "type": "object",
            "properties": {
                "model": {
                    "default": "opcb",
                    "description": "The code of the model of the device. Affects UI, registers map and periphery operation.",
                    "anyOf": [
                        {
                            "const": "opcb",
                            "type": "string"
                        },
                        {
                            "const": "opcb221",
                            "type": "string"
                        },
                        {
                            "const": "opcb221b",
                            "type": "string"
                        },
                        {
                            "const": "opcb224l",
                            "type": "string"
                        }
                    ]
                },
                "modelName": {
                    "default": null,
                    "description": "The name of the model of the device as displayed to the user. Only used in UI.",
                    "anyOf": [
                        {
                            "maxLength": 30,
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "manufacturerName": {
                    "default": null,
                    "description": "The name of the manufacturer of the device. Only used in UI.",
                    "anyOf": [
                        {
                            "maxLength": 30,
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "lastRunVersion": {
                    "default": "",
                    "maxLength": 100,
                    "description": "The version of the software that was running on the device when it was last powered off. Affects data and configuration migrations.",
                    "type": "string"
                },
                "lastAppliedFileMigration": {
                    "default": null,
                    "description": "The version of the files migration that was last ran on the device.",
                    "anyOf": [
                        {
                            "minimum": 0,
                            "maximum": 9999,
                            "type": "integer"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "userProvidedDeviceName": {
                    "name": "User device name",
                    "mapper": {
                        "address": 1000,
                        "length": 30
                    },
                    "default": "",
                    "maxLength": 30,
                    "description": "The name of the device provided by user. Used in the UI.",
                    "group": "Global configuration",
                    "type": "string"
                },
                "setHostName": {
                    "default": true,
                    "description": "If enabled, the runtime will set the hostname of the device to the name of the model and the first 3 bytes of the MAC address.",
                    "type": "boolean"
                },
                "manageAptDependencies": {
                    "default": true,
                    "description": "If enabled, the runtime will install required dependencies through the apt package manager. If disabled, the user is responsible for installing the dependencies.",
                    "type": "boolean"
                },
                "manageNetworking": {
                    "default": true,
                    "description": "If enabled, the runtime will manage networking through the NetworkManager.\n\nWARNING: if disabled, all network configuration settings will never be applied, in that case user is responsible to configure the Linux networking manually.",
                    "type": "boolean"
                },
                "manageUsbModeSwitch": {
                    "default": true,
                    "description": "If enabled, the runtime will manage usb_modeswitch.",
                    "type": "boolean"
                },
                "labelLink": {
                    "default": null,
                    "description": "Overvis connection link to be printed on the label.",
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "time": {
                    "additionalProperties": false,
                    "default": {},
                    "type": "object",
                    "properties": {
                        "manageSettings": {
                            "default": true,
                            "description": "If disabled, OPCB will not change any time settings on the device.",
                            "type": "boolean"
                        },
                        "timezone": {
                            "name": "Timezone",
                            "mapper": {
                                "address": 1030,
                                "length": 50
                            },
                            "default": "Etc/UTC",
                            "maxLength": 50,
                            "description": "The timezone of the device. Used to set the timezone of the OPCB Linux system.",
                            "group": "Global configuration",
                            "type": "string"
                        },
                        "useNtp": {
                            "name": "Use NTP",
                            "mapper": {
                                "address": 1080
                            },
                            "default": true,
                            "description": "If true, OPCB will enable Linux system time syncronization using NTP.",
                            "group": "Global configuration",
                            "type": "boolean"
                        }
                    },
                    "required": [
                        "manageSettings",
                        "timezone",
                        "useNtp"
                    ]
                },
                "updateMode": {
                    "default": "auto-only-minor",
                    "description": "The mode that determines how the OPCB auto-update process works. `auto-only-patch` - only patch versions (security updates) will be automatically installed. `auto-only-minor` - only patch and minor versions will be installed. `auto-all` - all updates, including major, will be automatically installed, also this will install unreleased versions (latest untagged commits). `manual` - system will check for available updates, but no updates will be installed automatically, and must be installed by the user request. `disabled` - the system will not check for available updates at all. If the OPCB runtime is not installed as a checkout from a git repository, the updates are disabled irregarding of this setting.",
                    "anyOf": [
                        {
                            "const": "auto-only-patch",
                            "type": "string"
                        },
                        {
                            "const": "auto-only-minor",
                            "type": "string"
                        },
                        {
                            "const": "auto-all",
                            "type": "string"
                        },
                        {
                            "const": "manual",
                            "type": "string"
                        },
                        {
                            "const": "disabled",
                            "type": "string"
                        }
                    ]
                },
                "allowForcedUpdates": {
                    "default": false,
                    "description": "If enabled, allows updates on dirty repository.",
                    "type": "boolean"
                },
                "autoUpdateTimeRange": {
                    "additionalProperties": false,
                    "default": {
                        "from": "01:00",
                        "till": "03:00"
                    },
                    "description": "The period of day during which automatic updates can be applied. Update process may take up to several minutes of downtime. Only applies to auto update modes.",
                    "type": "object",
                    "properties": {
                        "from": {
                            "default": "01:00",
                            "pattern": "^\\d\\d:\\d\\d$",
                            "description": "From this time of day.",
                            "type": "string"
                        },
                        "till": {
                            "default": "03:00",
                            "pattern": "^\\d\\d:\\d\\d$",
                            "description": "Till this time of day. If the time is less than `from` - the update window is considered to be `till` - `from` hours long, and ending on the next day.",
                            "type": "string"
                        }
                    },
                    "required": [
                        "from",
                        "till"
                    ]
                },
                "quickSetupIsDone": {
                    "default": false,
                    "description": "Indicates if the quick setup has been completed by user.",
                    "type": "boolean"
                },
                "setupAutomaticFSCheckOnBoot": {
                    "default": true,
                    "description": "If enabled, adds a line to /boot/armbianEnv.txt that requires automatic check and repairing of the disk file system on boot.",
                    "type": "boolean"
                },
                "setupArmbianSpi": {
                    "default": true,
                    "description": "If enabled, adds a line to /boot/armbianEnv.txt that enables SPI on the device.",
                    "type": "boolean"
                }
            },
            "required": [
                "model",
                "modelName",
                "manufacturerName",
                "lastRunVersion",
                "lastAppliedFileMigration",
                "userProvidedDeviceName",
                "setHostName",
                "manageAptDependencies",
                "manageNetworking",
                "manageUsbModeSwitch",
                "labelLink",
                "time",
                "updateMode",
                "allowForcedUpdates",
                "autoUpdateTimeRange",
                "quickSetupIsDone",
                "setupAutomaticFSCheckOnBoot",
                "setupArmbianSpi"
            ]
        },
        "elan": {
            "description": "Ethernet connection configuration.",
            "additionalProperties": false,
            "default": {},
            "type": "object",
            "properties": {
                "networkInterfaceName": {
                    "name": "Network interface name",
                    "mapper": {
                        "address": 1100,
                        "length": 20
                    },
                    "description": "Ethernet network interface name. Null disables Ethernet connection completely.",
                    "default": "eth0",
                    "group": "Ethernet",
                    "anyOf": [
                        {
                            "maxLength": 20,
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "dhcpIsEnabled": {
                    "name": "DHCP is enabled",
                    "mapper": {
                        "address": 1120
                    },
                    "description": "Automatic (DHCP) address acquiring is enabled.",
                    "default": true,
                    "group": "Ethernet",
                    "type": "boolean"
                },
                "fixMacAddress": {
                    "name": "Fix MAC address",
                    "mapper": {
                        "address": 1121
                    },
                    "description": "If enabled, OPCB runtime will manage device's MAC address. This is needed for some boards, that have incorrect MAC address set by default (e.g. Banana Pi 4). If the board has incorrect or empty MAC address, OPCB will generate replacement MAC and store it in the `mac` setting. This option allows OPCB runtime to change the board's MAC to the generated one on startup.",
                    "default": false,
                    "group": "Ethernet",
                    "type": "boolean"
                },
                "mac": {
                    "name": "MAC address",
                    "mapper": {
                        "address": 1122
                    },
                    "description": "MAC address of the device. Used as an identifier for Overvis reverse connection and hostname.",
                    "default": null,
                    "group": "Ethernet",
                    "anyOf": [
                        {
                            "pattern": "^([0-9a-f]{2}[:-]){5}([0-9a-f]{2})$",
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "staticIpSettings": {
                    "description": "Static IP configuration.",
                    "additionalProperties": false,
                    "default": {},
                    "type": "object",
                    "properties": {
                        "ipAddress": {
                            "format": "ipv4",
                            "description": "IP address.",
                            "default": "192.168.0.111",
                            "type": "string"
                        },
                        "subnetMask": {
                            "format": "ipv4",
                            "description": "Subnet mask.",
                            "default": "255.255.255.0",
                            "type": "string"
                        },
                        "gateway": {
                            "format": "ipv4",
                            "description": "Gateway IP.",
                            "default": "192.168.0.1",
                            "type": "string"
                        },
                        "primaryDns": {
                            "format": "ipv4",
                            "description": "Primary DNS.",
                            "default": "192.168.0.1",
                            "type": "string"
                        },
                        "secondaryDns": {
                            "format": "ipv4",
                            "description": "Secondary DNS.",
                            "default": "8.8.8.8",
                            "type": "string"
                        }
                    },
                    "required": [
                        "ipAddress",
                        "subnetMask",
                        "gateway",
                        "primaryDns",
                        "secondaryDns"
                    ]
                }
            },
            "required": [
                "networkInterfaceName",
                "dhcpIsEnabled",
                "fixMacAddress",
                "mac",
                "staticIpSettings"
            ]
        },
        "wlan": {
            "description": "Wi-Fi connection configuration.",
            "additionalProperties": false,
            "default": {},
            "type": "object",
            "properties": {
                "networkInterfaceName": {
                    "name": "Network interface name",
                    "mapper": {
                        "address": 1200,
                        "length": 20
                    },
                    "description": "Wi-Fi network interface name. Null disables Wi-Fi connection completely.",
                    "default": "wlan0",
                    "group": "Wi-Fi",
                    "anyOf": [
                        {
                            "maxLength": 20,
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "mode": {
                    "name": "Wi-Fi mode",
                    "mapper": {
                        "address": 1220,
                        "values": {
                            "ap": 0,
                            "station": 1
                        }
                    },
                    "description": "The mode of the WLAN interface: ap - Access Point, station - connect to station.",
                    "default": "ap",
                    "group": "Wi-Fi",
                    "anyOf": [
                        {
                            "const": "ap",
                            "type": "string"
                        },
                        {
                            "const": "station",
                            "type": "string"
                        }
                    ]
                },
                "country": {
                    "name": "Wi-Fi country code",
                    "mapper": {
                        "address": 1222,
                        "length": 2
                    },
                    "maxLength": 2,
                    "description": "Wi-Fi country code as defined by ISO 3166-1.",
                    "default": "PL",
                    "group": "Wi-Fi",
                    "type": "string"
                },
                "apSettings": {
                    "additionalProperties": false,
                    "description": "Wi-Fi Access Point settings. Only applied when mode = ap.",
                    "default": {},
                    "type": "object",
                    "properties": {
                        "ssid": {
                            "name": "Wi-Fi Access Point SSID (name)",
                            "mapper": {
                                "address": 1224,
                                "length": 32
                            },
                            "description": "Wi-Fi Access Point SSID (name).\nAllowed chars: (a-z), (A-Z), (0-9), (space) and ( !#%&'()*,-./:;<=>@^_{}| )\nFirst char can't be: space, !, # and ; (ASCII 0x20, 0x21, 0x23, 0x3B).\nLast char can't be: space (ASCII 0x20).\nTo use the default name (OPCB_XXXXXX), set to null.",
                            "default": null,
                            "group": "Wi-Fi",
                            "anyOf": [
                                {
                                    "maxLength": 32,
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ]
                        },
                        "password": {
                            "name": "Wi-Fi password",
                            "mapper": {
                                "address": 1256,
                                "length": 63
                            },
                            "description": "Wi-Fi Access Point password. Allowed chars: (a-z), (A-Z), (0-9), (space) and ( !\"#$%&'()*+,-./\\:;<=>?@[]^_{}| )",
                            "default": null,
                            "group": "Wi-Fi",
                            "anyOf": [
                                {
                                    "maxLength": 63,
                                    "pattern": "^[ -~]{8,63}$",
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ]
                        },
                        "ipAddress": {
                            "name": "Wi-Fi Access Point IP address",
                            "mapper": {
                                "address": 1319
                            },
                            "format": "ipv4",
                            "description": "Wi-Fi Access Point IP address.",
                            "default": "192.168.4.1",
                            "group": "Wi-Fi",
                            "type": "string"
                        },
                        "subnetMask": {
                            "name": "Wi-Fi Access Point subnet mask",
                            "mapper": {
                                "address": 1323
                            },
                            "format": "ipv4",
                            "description": "Wi-Fi Access Point subnet mask.",
                            "default": "255.255.255.0",
                            "group": "Wi-Fi",
                            "type": "string"
                        }
                    },
                    "required": [
                        "ssid",
                        "password",
                        "ipAddress",
                        "subnetMask"
                    ]
                },
                "stationSettings": {
                    "additionalProperties": false,
                    "description": "Wi-Fi station settings. Only applied when mode = station.",
                    "default": {},
                    "type": "object",
                    "properties": {
                        "ssid": {
                            "name": "Wi-Fi station SSID (name)",
                            "mapper": {
                                "address": 1327,
                                "length": 32
                            },
                            "description": "Wi-Fi station SSID (name).\nAllowed chars: (a-z), (A-Z), (0-9), (space) and ( !#%&'()*,-./:;<=>@^_{}| )\nFirst char can't be: space, !, # and ; (ASCII 0x20, 0x21, 0x23, 0x3B).\nLast char can't be: space (ASCII 0x20).\nNull value disables the Wi-Fi station connection.",
                            "default": null,
                            "group": "Wi-Fi",
                            "anyOf": [
                                {
                                    "maxLength": 32,
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ]
                        },
                        "password": {
                            "name": "Wi-Fi station password",
                            "mapper": {
                                "address": 1359,
                                "length": 63
                            },
                            "description": "Wi-Fi station password. Allowed chars: (a-z), (A-Z), (0-9), (space) and ( !\"#$%&'()*+,-./\\:;<=>?@[]^_{}| )",
                            "default": null,
                            "group": "Wi-Fi",
                            "anyOf": [
                                {
                                    "maxLength": 63,
                                    "pattern": "^[ -~]{8,63}$",
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ]
                        },
                        "dhcpIsEnabled": {
                            "name": "DHCP is enabled",
                            "mapper": {
                                "address": 1422
                            },
                            "description": "Automatic (DHCP) address acquiring is enabled.",
                            "default": true,
                            "group": "Wi-Fi",
                            "type": "boolean"
                        },
                        "staticIpSettings": {
                            "description": "Static IP configuration.",
                            "additionalProperties": false,
                            "default": {},
                            "type": "object",
                            "properties": {
                                "ipAddress": {
                                    "format": "ipv4",
                                    "description": "IP address.",
                                    "default": "192.168.0.111",
                                    "type": "string"
                                },
                                "subnetMask": {
                                    "format": "ipv4",
                                    "description": "Subnet mask.",
                                    "default": "255.255.255.0",
                                    "type": "string"
                                },
                                "gateway": {
                                    "format": "ipv4",
                                    "description": "Gateway IP.",
                                    "default": "192.168.0.1",
                                    "type": "string"
                                },
                                "primaryDns": {
                                    "format": "ipv4",
                                    "description": "Primary DNS.",
                                    "default": "192.168.0.1",
                                    "type": "string"
                                },
                                "secondaryDns": {
                                    "format": "ipv4",
                                    "description": "Secondary DNS.",
                                    "default": "8.8.8.8",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "ipAddress",
                                "subnetMask",
                                "gateway",
                                "primaryDns",
                                "secondaryDns"
                            ]
                        }
                    },
                    "required": [
                        "ssid",
                        "password",
                        "dhcpIsEnabled",
                        "staticIpSettings"
                    ]
                }
            },
            "required": [
                "networkInterfaceName",
                "mode",
                "country",
                "apSettings",
                "stationSettings"
            ]
        },
        "gsm": {
            "description": "GSM connection configuration.",
            "additionalProperties": false,
            "default": {
                "manageGsm": true,
                "apn": "internet",
                "apnUserName": "",
                "apnPassword": "",
                "operatorPhoneNumber": "*99#",
                "simPinCode": ""
            },
            "type": "object",
            "properties": {
                "manageGsm": {
                    "default": true,
                    "description": "If enabled, OPCB will manage GSM stick devcie.",
                    "type": "boolean"
                },
                "apn": {
                    "name": "Access Point Name",
                    "maxLength": 100,
                    "description": "Is the name of a gateway between a mobile network (GSM, GPRS, 3G, 4G and 5G)",
                    "default": "internet",
                    "type": "string"
                },
                "apnUserName": {
                    "name": "APN User Name",
                    "maxLength": 64,
                    "description": "",
                    "default": "",
                    "type": "string"
                },
                "apnPassword": {
                    "name": "APN Password",
                    "maxLength": 64,
                    "description": "",
                    "default": "",
                    "type": "string"
                },
                "operatorPhoneNumber": {
                    "name": "Phone number",
                    "maxLength": 64,
                    "description": "",
                    "default": "*99#",
                    "type": "string"
                },
                "simPinCode": {
                    "name": "SIM pin code",
                    "maxLength": 4,
                    "description": "",
                    "default": "",
                    "type": "string"
                }
            },
            "required": [
                "manageGsm",
                "apn",
                "apnUserName",
                "apnPassword",
                "operatorPhoneNumber",
                "simPinCode"
            ]
        },
        "virtualDevice": {
            "description": "OPCB virtual Modbus device configuration.",
            "additionalProperties": false,
            "default": {},
            "type": "object",
            "properties": {
                "isEnabled": {
                    "description": "Enable the virtual Modbus device that provides OPCB settings and status variables through the registers.",
                    "default": true,
                    "type": "boolean"
                },
                "uid": {
                    "name": "Modbus UID",
                    "mapper": {
                        "address": 1500,
                        "multiplier": 1
                    },
                    "minimum": 0,
                    "maximum": 255,
                    "description": "The Modbus UID (device address) of the virtual device.",
                    "default": 111,
                    "group": "Virtual device",
                    "type": "integer"
                }
            },
            "required": [
                "isEnabled",
                "uid"
            ]
        },
        "modbusTcp": {
            "description": "Common Modbus TCP configuration.",
            "additionalProperties": false,
            "default": {},
            "type": "object",
            "properties": {
                "maxPayloadLength": {
                    "minimum": 12,
                    "maximum": 1000,
                    "description": "Modbus TCP maximum payload length in bytes.",
                    "default": 256,
                    "type": "integer"
                },
                "requestBufferSize": {
                    "minimum": 1024,
                    "maximum": 32768,
                    "description": "Modbus TCP RX (requests) buffer size in bytes.",
                    "default": 2048,
                    "type": "integer"
                },
                "responseBufferSize": {
                    "minimum": 1024,
                    "maximum": 32768,
                    "description": "Modbus TCP TX (responses) buffer size in bytes.",
                    "default": 2048,
                    "type": "integer"
                },
                "threadPollPeriodMicrosec": {
                    "minimum": 1,
                    "maximum": 65535,
                    "description": "Sleep time when TCP socket is idle, microseconds.",
                    "default": 2000,
                    "type": "integer"
                }
            },
            "required": [
                "maxPayloadLength",
                "requestBufferSize",
                "responseBufferSize",
                "threadPollPeriodMicrosec"
            ]
        },
        "modbusTcpServer": {
            "description": "Modbus TCP server configuration.",
            "additionalProperties": false,
            "default": {},
            "type": "object",
            "properties": {
                "interface": {
                    "name": "Network interface",
                    "mapper": {
                        "address": 1600,
                        "values": {
                            "disabled": 0,
                            "any": 1,
                            "lo": 2,
                            "elan": 3,
                            "wlan": 4
                        }
                    },
                    "description": "Network interface to listen for Modbus TCP requests.\ndisabled - Modbus TCP server is disabled completely.\nany - Modbus TCP server is listening on all interfaces.\nlo - Modbus TCP server is listening on loopback interface.\nelan - Modbus TCP server is listening on Ethernet LAN interface.\nwlan - Modbus TCP server is listening on Wi-Fi LAN interface.",
                    "default": "any",
                    "group": "TCP server",
                    "anyOf": [
                        {
                            "const": "disabled",
                            "type": "string"
                        },
                        {
                            "const": "any",
                            "type": "string"
                        },
                        {
                            "const": "lo",
                            "type": "string"
                        },
                        {
                            "const": "elan",
                            "type": "string"
                        },
                        {
                            "const": "wlan",
                            "type": "string"
                        }
                    ]
                },
                "port": {
                    "name": "Modbus TCP server port",
                    "mapper": {
                        "address": 1601,
                        "multiplier": 1
                    },
                    "minimum": 1,
                    "maximum": 65535,
                    "description": "Modbus TCP server port.",
                    "default": 502,
                    "group": "TCP server",
                    "type": "integer"
                },
                "maxClients": {
                    "name": "Maximum number of Modbus TCP client connections",
                    "mapper": {
                        "address": 1602,
                        "multiplier": 1
                    },
                    "minimum": 1,
                    "maximum": 20,
                    "description": "Maximum number of Modbus TCP client connections.",
                    "default": 4,
                    "group": "TCP server",
                    "type": "integer"
                },
                "clientAliveTimeoutSec": {
                    "name": "Client alive timeout",
                    "mapper": {
                        "address": 1603,
                        "multiplier": 1
                    },
                    "minimum": 15,
                    "maximum": 3600,
                    "description": "Time (in seconds) without data transfer, after which the client is considered disconnected.",
                    "default": 60,
                    "group": "TCP server",
                    "unit": "s",
                    "type": "integer"
                },
                "responseTimeoutMs": {
                    "name": "Response timeout",
                    "mapper": {
                        "address": 1604,
                        "multiplier": 1
                    },
                    "minimum": 1,
                    "maximum": 60000,
                    "description": "Response timeout in milliseconds.",
                    "default": 1500,
                    "group": "TCP server",
                    "unit": "ms",
                    "type": "integer"
                },
                "parallelRequestsNum": {
                    "name": "Maximum number of simultaneously processed requests from one client",
                    "mapper": {
                        "address": 1605,
                        "multiplier": 1
                    },
                    "minimum": 1,
                    "maximum": 20,
                    "description": "Maximum number of simultaneously processed requests from one client.\n1 - each request waits until the previous one is finished.\nOther values allow for responses to be sent in groups.",
                    "default": 1,
                    "group": "TCP server",
                    "type": "integer"
                },
                "portOpenRetryPeriodSec": {
                    "name": "Port open retry period",
                    "mapper": {
                        "address": 1606,
                        "multiplier": 1
                    },
                    "minimum": 1,
                    "maximum": 600,
                    "description": "Time (in seconds) to wait befory retrying open port for listening if it is not available.",
                    "default": 5,
                    "group": "TCP server",
                    "unit": "s",
                    "type": "integer"
                },
                "broadcastIsEnabled": {
                    "name": "Enable broadcast requests",
                    "mapper": {
                        "address": 1607
                    },
                    "description": "Enable broadcast Modbus TCP requests.",
                    "default": false,
                    "group": "TCP server",
                    "type": "boolean"
                }
            },
            "required": [
                "interface",
                "port",
                "maxClients",
                "clientAliveTimeoutSec",
                "responseTimeoutMs",
                "parallelRequestsNum",
                "portOpenRetryPeriodSec",
                "broadcastIsEnabled"
            ]
        },
        "modbusTcpClients": {
            "name": "Modbus TCP client",
            "maxItems": 4,
            "modbusArrayAddressSpacing": 50,
            "description": "Modbus TCP clients configurations.",
            "default": [],
            "type": "array",
            "items": {
                "additionalProperties": false,
                "description": "Modbus TCP client configuration.",
                "type": "object",
                "properties": {
                    "isEnabled": {
                        "name": "Enable Modbus TCP client",
                        "mapper": {
                            "address": 1700
                        },
                        "description": "Enable or disable the Modbus TCP client.",
                        "default": true,
                        "group": "TCP clients",
                        "type": "boolean"
                    },
                    "interface": {
                        "name": "Network interface",
                        "mapper": {
                            "address": 1701,
                            "values": {
                                "any": 1,
                                "lo": 2,
                                "elan": 3,
                                "wlan": 4
                            }
                        },
                        "description": "Network interface to use for Modbus TCP connection.\nany - Modbus TCP server is listening on all interfaces.\nlo - Modbus TCP server is listening on loopback interface.\nelan - Modbus TCP server is listening on Ethernet LAN interface.\nwlan - Modbus TCP server is listening on Wi-Fi LAN interface.",
                        "default": "any",
                        "group": "TCP clients",
                        "anyOf": [
                            {
                                "const": "any",
                                "type": "string"
                            },
                            {
                                "const": "lo",
                                "type": "string"
                            },
                            {
                                "const": "elan",
                                "type": "string"
                            },
                            {
                                "const": "wlan",
                                "type": "string"
                            }
                        ]
                    },
                    "remoteServer": {
                        "additionalProperties": false,
                        "description": "Address of the remote Modbus TCP server to connect to.",
                        "default": {},
                        "type": "object",
                        "properties": {
                            "ip": {
                                "name": "Remote Modbus TCP server IP",
                                "mapper": {
                                    "address": 1702
                                },
                                "format": "ipv4",
                                "description": "Remote Modbus TCP server IP address.",
                                "default": "192.168.1.122",
                                "group": "TCP clients",
                                "type": "string"
                            },
                            "port": {
                                "name": "Remote Modbus TCP server port",
                                "mapper": {
                                    "address": 1706,
                                    "multiplier": 1
                                },
                                "minimum": 1,
                                "maximum": 65535,
                                "description": "Remote Modbus TCP server port.",
                                "default": 502,
                                "group": "TCP clients",
                                "type": "integer"
                            }
                        },
                        "required": [
                            "ip",
                            "port"
                        ]
                    },
                    "uidRange": {
                        "name": "Modbus slave addresses ranges",
                        "mapper": {
                            "address": 1707,
                            "length": 30
                        },
                        "pattern": "^(\\d+-\\d+,)*\\d+-\\d+$",
                        "maxLength": 1000,
                        "description": "Comma separated list of Modbus slave addresses ranges. For example: 1-10,20-30,40-50. Only applied if mode is rtu-master or ascii-master.",
                        "default": "1-255",
                        "group": "TCP clients",
                        "type": "string"
                    },
                    "reconnectionPeriodSec": {
                        "name": "Reconnection period",
                        "mapper": {
                            "address": 1737,
                            "multiplier": 1
                        },
                        "minimum": 1,
                        "maximum": 600,
                        "description": "Reconnection period in seconds in case of connection failure.",
                        "default": 5,
                        "group": "TCP clients",
                        "unit": "s",
                        "type": "integer"
                    },
                    "responseTimeoutMs": {
                        "name": "Response timeout",
                        "mapper": {
                            "address": 1738,
                            "multiplier": 1
                        },
                        "minimum": 1,
                        "maximum": 60000,
                        "description": "Response timeout in milliseconds.",
                        "default": 1000,
                        "group": "TCP clients",
                        "unit": "ms",
                        "type": "integer"
                    },
                    "parallelRequestsNum": {
                        "name": "Parallel requests",
                        "mapper": {
                            "address": 1739,
                            "multiplier": 1
                        },
                        "minimum": 1,
                        "maximum": 20,
                        "description": "Maximum number of simultaneously sent requests.\n1 - each request waits until the previous one is finished.\nOther values allow for requests to be sent in groups.",
                        "default": 1,
                        "group": "TCP clients",
                        "type": "integer"
                    },
                    "broadcastIsEnabled": {
                        "name": "Enable broadcast",
                        "mapper": {
                            "address": 1740
                        },
                        "description": "Enable broadcast Modbus TCP requests.",
                        "default": false,
                        "group": "TCP clients",
                        "type": "boolean"
                    }
                },
                "required": [
                    "isEnabled",
                    "interface",
                    "remoteServer",
                    "uidRange",
                    "reconnectionPeriodSec",
                    "responseTimeoutMs",
                    "parallelRequestsNum",
                    "broadcastIsEnabled"
                ]
            }
        },
        "modbusRs485": {
            "name": "Modbus RS-485 port",
            "description": "RS-485 Modbus ports configurations.",
            "maxItems": 4,
            "modbusArrayAddressSpacing": 100,
            "default": [],
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "isEnabled": {
                        "name": "Enable Modbus RS-485",
                        "mapper": {
                            "address": 1900
                        },
                        "description": "Enable or disable the Modbus RS485 interface.",
                        "default": true,
                        "group": "Modbus RS-485",
                        "type": "boolean"
                    },
                    "deviceName": {
                        "name": "Device name",
                        "mapper": {
                            "address": 1901,
                            "length": 20
                        },
                        "pattern": "^[a-zA-Z0-9_-]{2,20}$",
                        "maxLength": 20,
                        "description": "Linux device file name. Will be looked up in /dev/",
                        "default": "ttyUSB0",
                        "group": "Modbus RS-485",
                        "type": "string"
                    },
                    "mode": {
                        "name": "Operation mode",
                        "mapper": {
                            "address": 1922,
                            "values": {
                                "rtu-master": 1,
                                "ascii-master": 2,
                                "rtu-slave": 3,
                                "ascii-slave": 4,
                                "ipka-master": 5
                            }
                        },
                        "description": "Modbus operation mode.",
                        "default": "rtu-master",
                        "group": "Modbus RS-485",
                        "anyOf": [
                            {
                                "const": "rtu-master",
                                "type": "string"
                            },
                            {
                                "const": "ascii-master",
                                "type": "string"
                            },
                            {
                                "const": "rtu-slave",
                                "type": "string"
                            },
                            {
                                "const": "ascii-slave",
                                "type": "string"
                            },
                            {
                                "const": "ipka-master",
                                "type": "string"
                            }
                        ]
                    },
                    "uidRange": {
                        "name": "Modbus slave addresses ranges",
                        "mapper": {
                            "address": 1923,
                            "length": 30
                        },
                        "pattern": "^(\\d+-\\d+,)*\\d+-\\d+$",
                        "maxLength": 1000,
                        "description": "Comma separated list of Modbus slave addresses ranges. For example: 1-10,20-30,40-50. Only applied if mode is rtu-master or ascii-master.",
                        "default": "1-255",
                        "group": "Modbus RS-485",
                        "type": "string"
                    },
                    "responseTimeoutMs": {
                        "name": "Response timeout",
                        "mapper": {
                            "address": 1953,
                            "multiplier": 1
                        },
                        "minimum": 1,
                        "maximum": 60000,
                        "description": "Response timeout in milliseconds.",
                        "default": 300,
                        "group": "Modbus RS-485",
                        "unit": "ms",
                        "type": "integer"
                    },
                    "baudRate": {
                        "name": "Baud rate",
                        "mapper": {
                            "address": 1954,
                            "multiplier": 1
                        },
                        "description": "Port speed in bits per second.",
                        "default": 9600,
                        "group": "Modbus RS-485",
                        "unit": "bit/s",
                        "anyOf": [
                            {
                                "const": 50,
                                "type": "number"
                            },
                            {
                                "const": 75,
                                "type": "number"
                            },
                            {
                                "const": 110,
                                "type": "number"
                            },
                            {
                                "const": 134,
                                "type": "number"
                            },
                            {
                                "const": 150,
                                "type": "number"
                            },
                            {
                                "const": 200,
                                "type": "number"
                            },
                            {
                                "const": 300,
                                "type": "number"
                            },
                            {
                                "const": 600,
                                "type": "number"
                            },
                            {
                                "const": 1200,
                                "type": "number"
                            },
                            {
                                "const": 1800,
                                "type": "number"
                            },
                            {
                                "const": 2400,
                                "type": "number"
                            },
                            {
                                "const": 4800,
                                "type": "number"
                            },
                            {
                                "const": 9600,
                                "type": "number"
                            },
                            {
                                "const": 19200,
                                "type": "number"
                            },
                            {
                                "const": 38400,
                                "type": "number"
                            },
                            {
                                "const": 57600,
                                "type": "number"
                            },
                            {
                                "const": 115200,
                                "type": "number"
                            },
                            {
                                "const": 230400,
                                "type": "number"
                            },
                            {
                                "const": 460800,
                                "type": "number"
                            },
                            {
                                "const": 500000,
                                "type": "number"
                            },
                            {
                                "const": 576000,
                                "type": "number"
                            },
                            {
                                "const": 921600,
                                "type": "number"
                            },
                            {
                                "const": 1000000,
                                "type": "number"
                            },
                            {
                                "const": 1152000,
                                "type": "number"
                            },
                            {
                                "const": 1500000,
                                "type": "number"
                            },
                            {
                                "const": 2000000,
                                "type": "number"
                            },
                            {
                                "const": 2500000,
                                "type": "number"
                            },
                            {
                                "const": 3000000,
                                "type": "number"
                            },
                            {
                                "const": 3500000,
                                "type": "number"
                            },
                            {
                                "const": 4000000,
                                "type": "number"
                            }
                        ]
                    },
                    "stopAndParityBits": {
                        "name": "Stop and parity bits",
                        "mapper": {
                            "address": 1956,
                            "values": {
                                "1N": 0,
                                "1E": 1,
                                "1O": 2,
                                "2N": 3
                            }
                        },
                        "description": "Port stop and parity bits:\n1N - 1 stop bit, no parity;\n1E - 1 stop bit, even parity;\n1O - 1 stop bit, odd parity;\n2N - 2 stop bits, no parity.",
                        "default": "2N",
                        "group": "Modbus RS-485",
                        "anyOf": [
                            {
                                "const": "1N",
                                "type": "string"
                            },
                            {
                                "const": "1E",
                                "type": "string"
                            },
                            {
                                "const": "1O",
                                "type": "string"
                            },
                            {
                                "const": "2N",
                                "type": "string"
                            }
                        ]
                    },
                    "broadcastIsEnabled": {
                        "name": "Enable broadcast requests",
                        "mapper": {
                            "address": 1957
                        },
                        "description": "Enable broadcast Modbus RTU requests.",
                        "default": false,
                        "group": "Modbus RS-485",
                        "type": "boolean"
                    },
                    "gatewayGeneratedExceptions": {
                        "additionalProperties": false,
                        "description": "Gateway-generated exceptions.",
                        "default": {},
                        "type": "object",
                        "properties": {
                            "pathUnavalableCode": {
                                "description": "Exception code to return when no route to the requested address exists (Path Unavailable error). If null, no exception will be generated.",
                                "default": 10,
                                "anyOf": [
                                    {
                                        "minimum": 1,
                                        "maximum": 255,
                                        "type": "integer"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "targetDeviceFailedToRespondCode": {
                                "description": "Exception code to return when no response from the requested address was received after the delay specified in the `responseTimeoutMs` parameter (Target Device Failed To Respond error). If null, no exception will be generated.",
                                "default": 11,
                                "anyOf": [
                                    {
                                        "minimum": 1,
                                        "maximum": 255,
                                        "type": "integer"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            }
                        },
                        "required": [
                            "pathUnavalableCode",
                            "targetDeviceFailedToRespondCode"
                        ]
                    },
                    "portOpenRetryPeriod": {
                        "name": "Port open retry period",
                        "mapper": {
                            "address": 1958,
                            "multiplier": 1
                        },
                        "minimum": 1,
                        "maximum": 600,
                        "description": "Period in seconds to retry opening the port if it is not available.",
                        "default": 5,
                        "group": "Modbus RS-485",
                        "unit": "s",
                        "type": "integer"
                    }
                },
                "required": [
                    "isEnabled",
                    "deviceName",
                    "mode",
                    "uidRange",
                    "responseTimeoutMs",
                    "baudRate",
                    "stopAndParityBits",
                    "broadcastIsEnabled",
                    "gatewayGeneratedExceptions",
                    "portOpenRetryPeriod"
                ]
            }
        },
        "overvisVpn": {
            "additionalProperties": false,
            "description": "Overvis VPN configuration.",
            "default": {},
            "type": "object",
            "properties": {
                "isEnabled": {
                    "description": "If enabled, OPCB will connect to Overvis servers. If disabled, other settings are ignored, and OPCB will work in stand-alone mode.",
                    "default": true,
                    "type": "boolean"
                },
                "wireguard": {
                    "additionalProperties": false,
                    "description": "Overvis Wireguard VPN configuration.",
                    "default": {},
                    "type": "object",
                    "properties": {
                        "isManaged": {
                            "description": "If enabled, OPCB will manage Wireguard configuration on the device. If disabled, other settings are ignored, the user will have to manually configure Wireguard on the device in order to access Overvis VPN functionality.",
                            "default": true,
                            "type": "boolean"
                        },
                        "endpointHost": {
                            "format": "hostname",
                            "maxLength": 100,
                            "description": "Overvis Wireguard VPN server hostname or IP.",
                            "default": "motherland.overvis.com",
                            "type": "string"
                        },
                        "endpointPort": {
                            "minimum": 1,
                            "maximum": 65535,
                            "description": "Overvis Wireguard VPN server port.",
                            "default": 51820,
                            "type": "integer"
                        },
                        "endpointPublicKey": {
                            "description": "Overvis Wireguard VPN server public key. If set to null, Overvis VPN connection will be disabled completely, this will also disable some of the Overvis services for the device.",
                            "default": null,
                            "anyOf": [
                                {
                                    "contentEncoding": "8bit",
                                    "maxLength": 44,
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ]
                        },
                        "endpointAllowedIpsCidr": {
                            "pattern": "((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}\\/(?:\\d|[12]\\d|3[01])$",
                            "description": "Overvis Wireguard VPN server allowed IPs range.",
                            "default": "10.42.0.0/16",
                            "type": "string"
                        },
                        "privateKey": {
                            "description": "Overvis Wireguard VPN private key. If set to null, Overvis VPN connection will be disabled completely, this will also disable some of the Overvis services for the device.",
                            "default": null,
                            "anyOf": [
                                {
                                    "contentEncoding": "8bit",
                                    "maxLength": 44,
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ]
                        },
                        "ipAddressCidr": {
                            "description": "IP address with CIDR (range) of this device in Overvis Wireguard VPN. If set to null, Overvis VPN connection will be disabled completely, this will also disable some of the Overvis services for the device.",
                            "default": null,
                            "anyOf": [
                                {
                                    "pattern": "((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4}\\/(?:\\d|[12]\\d|3[01])$",
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ]
                        },
                        "persistentKeepalive": {
                            "minimum": 10,
                            "maximum": 3600,
                            "description": "Wireguard persistent keepalive setting (in seconds).",
                            "default": 60,
                            "type": "integer"
                        },
                        "setUpWgCheckCronJob": {
                            "description": "If enabled, OPCB will install the cron job that periodically checks and reloads the Wireguard if it loses the connection.",
                            "default": true,
                            "type": "boolean"
                        },
                        "vpnMotherlandServerIp": {
                            "format": "ipv4",
                            "description": "IP address of main VPN server. Used for pings, to determine if the VPN connection is active.",
                            "default": "10.42.0.1",
                            "type": "string"
                        }
                    },
                    "required": [
                        "isManaged",
                        "endpointHost",
                        "endpointPort",
                        "endpointPublicKey",
                        "endpointAllowedIpsCidr",
                        "privateKey",
                        "ipAddressCidr",
                        "persistentKeepalive",
                        "setUpWgCheckCronJob",
                        "vpnMotherlandServerIp"
                    ]
                },
                "pinCode": {
                    "description": "PIN code for Overvis cloud connection. Stored here to display in the web-interface. Changing this setting doesn't affect Overvis operation.",
                    "default": null,
                    "anyOf": [
                        {
                            "pattern": "^[A-Z0-9]{8}$",
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "boundToOcpServer": {
                    "maxLength": 100,
                    "description": "The OCP server to which this device is bound. Set by the server when the Overvis network is connected to this device. Empty string means no binding. This value is used only for the cross-server leak prevention and is not affecting the device's functionality in any way.",
                    "default": "",
                    "type": "string"
                },
                "boundToOcpAccountEmail": {
                    "maxLength": 250,
                    "description": "The OCP account to which this device is bound. Set by the server when the Overvis network is connected to this device. Empty string means no binding. This value is used only for the UI (quick access button) and is not affecting the device's functionality in any way.",
                    "default": "",
                    "type": "string"
                },
                "addRootSshKey": {
                    "description": "OPCB will install this SSH key to authorized_keys of the root user. This key is retrieved once during the registration on the VPN servers. This is needed for remote support access and maintenance. Several keys can be specified separated by newlines.",
                    "default": null,
                    "anyOf": [
                        {
                            "maxLength": 10000,
                            "type": "string"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "testServerApiUrl": {
                    "format": "uri",
                    "maxLength": 500,
                    "description": "The API URL of the test server that is used for manufacturing testing. The test server sends a range of test commands to the device during the manufacturing testing process.",
                    "default": "http://10.42.0.1/api",
                    "type": "string"
                },
                "publicMotherlandApiUrl": {
                    "format": "uri",
                    "maxLength": 500,
                    "description": "The public API URL of the motherland server that is used for manufacturing registering device.",
                    "default": "https://motherland.overvis.com/api",
                    "type": "string"
                },
                "telemetry": {
                    "additionalProperties": false,
                    "description": "Telemetry configuration.",
                    "default": {
                        "isEnabled": true,
                        "reportPeriodMinutes": 10,
                        "serverApiUrl": "https://motherland.overvis.com/api"
                    },
                    "type": "object",
                    "properties": {
                        "isEnabled": {
                            "description": "If enabled, OPCB will send telemetry data to the Motherland server every time.",
                            "default": true,
                            "type": "boolean"
                        },
                        "reportPeriodMinutes": {
                            "minimum": 5,
                            "maximum": 60,
                            "description": "Period to send telemetry data.",
                            "default": 10,
                            "type": "integer"
                        },
                        "serverApiUrl": {
                            "format": "uri",
                            "maxLength": 500,
                            "description": "The public API URL of the telemetry server that is used to collect the telemetry data.",
                            "default": "https://motherland.overvis.com/api",
                            "type": "string"
                        }
                    },
                    "required": [
                        "isEnabled",
                        "reportPeriodMinutes",
                        "serverApiUrl"
                    ]
                }
            },
            "required": [
                "isEnabled",
                "wireguard",
                "pinCode",
                "boundToOcpServer",
                "boundToOcpAccountEmail",
                "addRootSshKey",
                "testServerApiUrl",
                "publicMotherlandApiUrl",
                "telemetry"
            ]
        },
        "overvisReverseConnection": {
            "additionalProperties": false,
            "description": "Overvis reverse connection configuration.",
            "default": {},
            "type": "object",
            "properties": {
                "interface": {
                    "description": "Network interface to use for automatice Overvis reverse-connection.\ndisabled - Overvis reverse connection is disabled completely.\nany - Connect using any available interface with Internet access.\nlo - Connect using loopback interface.\nelan - Connect using Ethernet LAN interface.\nwlan - Connect using Wi-Fi LAN interface.",
                    "default": "disabled",
                    "anyOf": [
                        {
                            "const": "disabled",
                            "type": "string"
                        },
                        {
                            "const": "any",
                            "type": "string"
                        },
                        {
                            "const": "lo",
                            "type": "string"
                        },
                        {
                            "const": "elan",
                            "type": "string"
                        },
                        {
                            "const": "wlan",
                            "type": "string"
                        }
                    ]
                },
                "baseConnectUrl": {
                    "description": "Base Overvis server URL (no trailing slash).",
                    "default": "https://ocp.overvis.com",
                    "type": "string"
                },
                "hostname": {
                    "format": "hostname",
                    "description": "Hostname or IP address of the Overvis server.",
                    "default": "modbus.overvis.com",
                    "type": "string"
                },
                "port": {
                    "minimum": 1,
                    "maximum": 65535,
                    "description": "Overvis server port.",
                    "default": 20502,
                    "type": "integer"
                },
                "sendSelfIdentificationOnConnect": {
                    "description": "Sends self identification Modbus TCP message on connect. The message is a response to a function 0x3 request with registers 1000-1009 of the OPCB virtual device.",
                    "default": true,
                    "type": "boolean"
                },
                "responseTimeoutMs": {
                    "minimum": 1,
                    "maximum": 60000,
                    "description": "Response timeout in milliseconds.",
                    "default": 1500,
                    "type": "integer"
                },
                "parallelRequestsNum": {
                    "minimum": 1,
                    "maximum": 20,
                    "description": "Maximum number of simultaneously processed requests from Overvis.\n1 - each request waits until the previous one is finished.\nOther values allows for responses to be sent in groups.",
                    "default": 10,
                    "type": "integer"
                },
                "connectionAliveTimeoutSec": {
                    "minimum": 15,
                    "maximum": 3600,
                    "description": "Time (in seconds) without data transfer, after which the connection is considered closed.",
                    "default": 60,
                    "type": "integer"
                },
                "reconnectionPeriodSec": {
                    "minimum": 1,
                    "maximum": 600,
                    "description": "Reconnection period (in seconds) in case of connection failure.",
                    "default": 5,
                    "type": "integer"
                },
                "broadcastIsEnabled": {
                    "description": "Enable broadcast Modbus TCP requests.",
                    "default": false,
                    "type": "boolean"
                }
            },
            "required": [
                "interface",
                "baseConnectUrl",
                "hostname",
                "port",
                "sendSelfIdentificationOnConnect",
                "responseTimeoutMs",
                "parallelRequestsNum",
                "connectionAliveTimeoutSec",
                "reconnectionPeriodSec",
                "broadcastIsEnabled"
            ]
        },
        "http": {
            "additionalProperties": false,
            "description": "OPCB HTTP configuration.",
            "default": {},
            "type": "object",
            "properties": {
                "manageNginx": {
                    "default": true,
                    "description": "If enabled, OPCB will install and manage NGinx server configuration for API proxying. If disabled, user will have to configure NGinx to translate the API port and the UI.",
                    "type": "boolean"
                },
                "externalHost": {
                    "maxLength": 30,
                    "description": "Host to listen for HTTP requests. Use '*' to listen on all interfaces (default).",
                    "default": "*",
                    "type": "string"
                },
                "externalPort": {
                    "name": "HTTP port",
                    "mapper": {
                        "address": 1001,
                        "multiplier": 1
                    },
                    "minimum": 1,
                    "maximum": 65535,
                    "description": "Port to listen for HTTP requests. Note that SSL is not supported, even if the port is set to 443.",
                    "default": 80,
                    "group": "HTTP configuration",
                    "type": "integer"
                },
                "internalApiPort": {
                    "name": "API port",
                    "mapper": {
                        "address": 1002,
                        "multiplier": 1
                    },
                    "minimum": 1,
                    "maximum": 65535,
                    "description": "This port is proxied by Nginx web-server to the external HTTP port (80 by default) with an /api/ prefix.",
                    "default": 3000,
                    "group": "HTTP configuration",
                    "type": "integer"
                },
                "internalApiListenTo": {
                    "name": "Ip address to listen for API requests",
                    "mapper": {
                        "address": 1060
                    },
                    "format": "ipv4",
                    "description": "IP address to listen for API requests. Use '0.0.0.0' to listen on all interfaces, or 127.0.0.1 to listen to only local requests (default).",
                    "default": "127.0.0.1",
                    "group": "HTTP configuration",
                    "type": "string"
                },
                "enableApiRequestsLogging": {
                    "description": "Output request/response logging (level - info).",
                    "default": false,
                    "type": "boolean"
                }
            },
            "required": [
                "manageNginx",
                "externalHost",
                "externalPort",
                "internalApiPort",
                "internalApiListenTo",
                "enableApiRequestsLogging"
            ]
        },
        "monitoring": {
            "additionalProperties": false,
            "description": "Background checks and monitoring configuration.",
            "default": {},
            "type": "object",
            "properties": {
                "enableCommandFiles": {
                    "default": true,
                    "description": "If true, OPCB will automatically mount inserted USB drives and look for command files for config reset and unbind commands.",
                    "type": "boolean"
                },
                "monitorTemperature": {
                    "default": true,
                    "description": "If true, OPCB will check CPU temperature periodically and report in the UI and API.",
                    "type": "boolean"
                },
                "monitorDiskSpace": {
                    "default": true,
                    "description": "If true, OPCB will check storage space periodically and report in the UI and API.",
                    "type": "boolean"
                },
                "monitorVoltage": {
                    "default": true,
                    "description": "If true, OPCB will check power voltage periodically and report in the UI and API.",
                    "type": "boolean"
                },
                "internetAccessPingIp": {
                    "format": "ipv4",
                    "default": "8.8.8.8",
                    "description": "IP address to ping to determine if internet connection is active.",
                    "type": "string"
                },
                "checkForExternalIp": {
                    "description": "If enabled, OPCB will periodically check for its own external IP address using https://www.ipify.org/ API.",
                    "default": true,
                    "type": "boolean"
                }
            },
            "required": [
                "enableCommandFiles",
                "monitorTemperature",
                "monitorDiskSpace",
                "monitorVoltage",
                "internetAccessPingIp",
                "checkForExternalIp"
            ]
        },
        "auth": {
            "additionalProperties": false,
            "description": "Authentication configuration.",
            "default": {},
            "type": "object",
            "properties": {
                "users": {
                    "description": "List of users. Default user: admin, password: admin.",
                    "default": [
                        {
                            "username": "admin",
                            "password": "admin",
                            "encryptedPassword": null,
                            "allowAuthThroughModbus": true,
                            "allowAuthThroughApi": true,
                            "configurationAccess": "readWrite",
                            "modbusDevicesAccess": "readWrite"
                        }
                    ],
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "username": {
                                "default": "admin",
                                "maxLength": 30,
                                "description": "Username.",
                                "type": "string"
                            },
                            "password": {
                                "default": null,
                                "description": "Password. Use only latin letters and digits if you need to provide authentication through Modbus.",
                                "anyOf": [
                                    {
                                        "maxLength": 30,
                                        "type": "string"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "encryptedPassword": {
                                "default": null,
                                "description": "Encrypted password. Plain password is automatically encrypted and removed from the configuration file. Authentication only uses encrypted password.",
                                "anyOf": [
                                    {
                                        "maxLength": 100,
                                        "type": "string"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "allowAuthThroughModbus": {
                                "default": false,
                                "description": "Allow authenticating through Modbus by writing password into OPCB virtual device's registers.",
                                "type": "boolean"
                            },
                            "allowAuthThroughApi": {
                                "default": true,
                                "description": "Allow authenticating through API. If disabled, this user can't login into device's web-interface.",
                                "type": "boolean"
                            },
                            "configurationAccess": {
                                "default": "none",
                                "description": "Access level to OPCB configuration settings.",
                                "anyOf": [
                                    {
                                        "const": "none",
                                        "type": "string"
                                    },
                                    {
                                        "const": "read",
                                        "type": "string"
                                    },
                                    {
                                        "const": "readWrite",
                                        "type": "string"
                                    }
                                ]
                            },
                            "modbusDevicesAccess": {
                                "default": "none",
                                "description": "Access level to Modbus devices connected to OPCB.",
                                "anyOf": [
                                    {
                                        "const": "none",
                                        "type": "string"
                                    },
                                    {
                                        "const": "read",
                                        "type": "string"
                                    },
                                    {
                                        "const": "readWrite",
                                        "type": "string"
                                    }
                                ]
                            }
                        },
                        "required": [
                            "username",
                            "password",
                            "encryptedPassword",
                            "allowAuthThroughModbus",
                            "allowAuthThroughApi",
                            "configurationAccess",
                            "modbusDevicesAccess"
                        ]
                    }
                },
                "defaultModbusAccess": {
                    "additionalProperties": false,
                    "description": "Default access level to OPCB configuration settings and Modbus devices connected to OPCB.",
                    "default": {},
                    "type": "object",
                    "properties": {
                        "configurationAccess": {
                            "description": "Default access level to OPCB configuration settings.",
                            "default": "read",
                            "anyOf": [
                                {
                                    "const": "none",
                                    "type": "string"
                                },
                                {
                                    "const": "read",
                                    "type": "string"
                                },
                                {
                                    "const": "readWrite",
                                    "type": "string"
                                }
                            ]
                        },
                        "modbusDevicesAccess": {
                            "description": "Default access level to Modbus devices connected to OPCB.",
                            "default": "readWrite",
                            "anyOf": [
                                {
                                    "const": "none",
                                    "type": "string"
                                },
                                {
                                    "const": "read",
                                    "type": "string"
                                },
                                {
                                    "const": "readWrite",
                                    "type": "string"
                                }
                            ]
                        }
                    },
                    "required": [
                        "configurationAccess",
                        "modbusDevicesAccess"
                    ]
                },
                "modbusAuthErrorCode": {
                    "minimum": 1,
                    "maximum": 255,
                    "description": "Modbus error code to return if access to some function is not allowed.",
                    "default": 10,
                    "type": "integer"
                },
                "sessionTtl": {
                    "name": "Session TTL",
                    "mapper": {
                        "address": 1003,
                        "multiplier": 1
                    },
                    "minimum": 0,
                    "maximum": 525600,
                    "description": "Session time-to-live in seconds. Updates on each request.",
                    "default": 300,
                    "group": "Session",
                    "unit": "s",
                    "type": "integer"
                },
                "freeAccessRequests": {
                    "description": "List of Modbus requests that are allowed without authentication.",
                    "default": [],
                    "type": "array",
                    "items": {
                        "additionalProperties": false,
                        "type": "object",
                        "properties": {
                            "device": {
                                "description": "Modbus device ID. Null - OPCB virtual device ID.",
                                "default": null,
                                "anyOf": [
                                    {
                                        "minimum": 0,
                                        "maximum": 255,
                                        "type": "integer"
                                    },
                                    {
                                        "type": "null"
                                    }
                                ]
                            },
                            "function": {
                                "minimum": 0,
                                "maximum": 128,
                                "description": "Modbus function code.",
                                "default": 0,
                                "type": "integer"
                            },
                            "registersRange": {
                                "pattern": "^(\\d+-\\d+,)*\\d+-\\d+$",
                                "description": "Modbus registers range. Format: \"startAddress-endAddress,startAddress-endAddress,...\". Example: \"0-10,20-30\".",
                                "default": "0-65535",
                                "type": "string"
                            }
                        },
                        "required": [
                            "device",
                            "function",
                            "registersRange"
                        ]
                    }
                }
            },
            "required": [
                "users",
                "defaultModbusAccess",
                "modbusAuthErrorCode",
                "sessionTtl",
                "freeAccessRequests"
            ]
        },
        "loraSens": {
            "description": "LoraSens gateway settings",
            "additionalProperties": false,
            "default": {
                "enabled": false,
                "frequencyDeviceKhz": 868175,
                "frequencyGatewayKhz": 868100,
                "bandwidthKhz": "62.5",
                "spreadingFactor": 7,
                "codingRateBits": 5,
                "txPowerLimitDbm": 17,
                "loraPollingTimeMs": 500
            },
            "type": "object",
            "properties": {
                "enabled": {
                    "default": false,
                    "description": "Enable LoRaSens gateway.",
                    "type": "boolean"
                },
                "frequencyDeviceKhz": {
                    "default": 868175,
                    "description": "Frequency of the device in Khz.",
                    "type": "integer"
                },
                "frequencyGatewayKhz": {
                    "default": 868100,
                    "description": "Frequency of the gateway in Khz.",
                    "type": "integer"
                },
                "bandwidthKhz": {
                    "default": "62.5",
                    "description": "Bandwidth in Khz.",
                    "type": "string"
                },
                "spreadingFactor": {
                    "default": 7,
                    "description": "Spreading factor.",
                    "type": "integer"
                },
                "codingRateBits": {
                    "default": 5,
                    "description": "Coding rate bits.",
                    "type": "integer"
                },
                "txPowerLimitDbm": {
                    "default": 17,
                    "description": "Tx power limit in dbm.",
                    "type": "integer"
                },
                "loraPollingTimeMs": {
                    "default": 500,
                    "description": "Polling time in ms.",
                    "type": "integer"
                }
            },
            "required": [
                "enabled",
                "frequencyDeviceKhz",
                "frequencyGatewayKhz",
                "bandwidthKhz",
                "spreadingFactor",
                "codingRateBits",
                "txPowerLimitDbm",
                "loraPollingTimeMs"
            ]
        },
        "$schema": {
            "default": "../opcb-runner/node_modules/@overvis/opcb-ts-shared/config.schema.json",
            "type": "string"
        }
    },
    "required": [
        "global",
        "elan",
        "wlan",
        "gsm",
        "virtualDevice",
        "modbusTcp",
        "modbusTcpServer",
        "modbusTcpClients",
        "modbusRs485",
        "overvisVpn",
        "overvisReverseConnection",
        "http",
        "monitoring",
        "auth",
        "loraSens",
        "$schema"
    ]
}