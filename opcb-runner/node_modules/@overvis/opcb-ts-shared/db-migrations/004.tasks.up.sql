create table tasks (
    id uuid default (uuid()) primary key,
    filepath text not null, -- path with file extension relative to user tasks project dir
    created_on integer not null default (strftime('%s', current_timestamp)),
    name text not null,
    description text not null,
    autorun_on_startup boolean not null default false,
    restart text not null default 'never', -- 'never', 'on-success', 'always'
    restart_delay_ms integer not null default 60000,
    log_to_stdout boolean not null default true,
    user_json text
);

create table task_stats (
    task_id uuid primary key,
    filepath text not null,
    runs_num integer not null default 0,
    errors_num integer not null default 0,
    last_run_start_on integer,
    last_run_finish_on integer,
    last_run_error text
);

drop table param_values;

create table param_values (
    id text default (uuid()) primary key,
    received_on integer not null,
    device_id text not null,
    param_id text not null,
    value text,
    error text
);
