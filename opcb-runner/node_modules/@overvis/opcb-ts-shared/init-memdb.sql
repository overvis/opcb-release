create table ls_templates (
    id varchar primary key,
    files_path text not null,
    type_code integer not null check (type_code >= 0 AND type_code <= 65535),
    firmware_version integer not null check (firmware_version >= 0 AND firmware_version <= 65535)
);

create table ls_binding (
    did integer primary key check (did >= 0),
    created_on integer default current_timestamp not null,
    accepted_on integer,
    blacklisted_on integer,
    orig_template_id text not null,
    -- the actual template data is in runner config folder (having subfolder 'binding/<did>')
    title text not null,
    rx_last_on integer,
    rx_signal integer,
    check (accepted_on == null or blacklisted_on == null)
);

create table ls_devices (
    device_id uuid primary key,
    updated_on integer default current_timestamp not null,
    expected_on integer,
    device_time integer,
    power_level integer,
    records_space_usage integer,
    rx_total integer default 0 not null,
    rx_speed integer default 0 not null,
    rx_last_on integer,
    rx_signal integer,
    tx_total integer default 0 not null,
    tx_speed integer default 0 not null,
    tx_last_on integer,
    tx_signal integer,
    packs_lost integer default 0 not null
);
